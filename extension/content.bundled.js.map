{
  "version": 3,
  "sources": ["../src/lib/timeouts.ts", "../src/lib/constants.ts", "../src/content/tab-tracking.ts", "../src/content/script-injection.ts", "../src/content/request-tracking.ts", "../src/content/message-forwarding.ts", "../src/content/window-message-listener.ts", "../src/content/timeout-utils.ts", "../src/content/message-handlers.ts", "../src/content/ui/toast.ts", "../src/content/ui/subtitle.ts", "../src/content/runtime-message-listener.ts", "../src/content/favicon-replacer.ts", "../src/content.ts"],
  "sourcesContent": ["/**\n * Purpose: Provides shared runtime utilities used by extension and server workflows.\n * Docs: docs/features/feature/observe/index.md\n */\n\n/**\n * @fileoverview Timeout scaling helpers for fast tests.\n */\n\ndeclare const process: { env: Record<string, string | undefined> } | undefined\nfunction readTestScale(): number {\n  const globalScale =\n    typeof globalThis !== 'undefined' && typeof (globalThis as { GASOLINE_TEST_TIMEOUT_SCALE?: number }).GASOLINE_TEST_TIMEOUT_SCALE === 'number'\n      ? (globalThis as unknown as { GASOLINE_TEST_TIMEOUT_SCALE: number }).GASOLINE_TEST_TIMEOUT_SCALE\n      : null\n  if (globalScale !== null) return globalScale\n  if (typeof process !== 'undefined' && process.env) {\n    const raw = process.env.GASOLINE_TEST_TIMEOUT_SCALE || process.env.GASOLINE_TEST_TIME_SCALE\n    if (raw) {\n      const parsed = Number(raw)\n      if (Number.isFinite(parsed)) return parsed\n    }\n  }\n  return 1\n}\n\nexport function scaleTimeout(ms: number): number {\n  const scale = readTestScale()\n  if (!Number.isFinite(scale) || scale <= 0 || scale === 1) {\n    return ms\n  }\n  return Math.max(5, Math.round(ms * scale))\n}\n", "/**\n * Purpose: Provides shared runtime utilities used by extension and server workflows.\n * Docs: docs/features/feature/observe/index.md\n */\n\n/**\n * @fileoverview Shared constants for the Gasoline extension capture modules.\n */\nimport { scaleTimeout } from './timeouts'\n\n// Server defaults\nexport const DEFAULT_SERVER_URL = 'http://localhost:7890'\n\n// Serialization limits\nexport const MAX_STRING_LENGTH = 10240 // 10KB\nexport const MAX_RESPONSE_LENGTH = 5120 // 5KB\nexport const MAX_DEPTH = 10\nexport const MAX_CONTEXT_SIZE = 50 // Max number of context keys\nexport const MAX_CONTEXT_VALUE_SIZE = 4096 // Max size of serialized context value\nexport const SENSITIVE_HEADERS: readonly string[] = [\n  'authorization',\n  'cookie',\n  'set-cookie',\n  'x-auth-token',\n  'x-api-key',\n  'x-csrf-token',\n  'proxy-authorization'\n]\n\n// User action replay settings\nexport const MAX_ACTION_BUFFER_SIZE = 20 // Max number of recent actions to keep\nexport const SCROLL_THROTTLE_MS = 250 // Throttle scroll events\nexport const SENSITIVE_INPUT_TYPES: readonly string[] = ['password', 'credit-card', 'cc-number', 'cc-exp', 'cc-csc']\n\n// Network Waterfall settings\nexport const MAX_WATERFALL_ENTRIES = 50 // Max network entries to capture\nexport const WATERFALL_TIME_WINDOW_MS = 30000 // Only capture last 30 seconds\n\n// Performance Marks settings\nexport const MAX_PERFORMANCE_ENTRIES = 50 // Max performance entries to capture\nexport const PERFORMANCE_TIME_WINDOW_MS = 60000 // Only capture last 60 seconds\n\n// WebSocket capture settings\nexport const WS_MAX_BODY_SIZE = 4096 // 4KB truncation limit\nexport const WS_PREVIEW_LIMIT = 200 // Preview character limit\n\n// Network body capture settings\nexport const REQUEST_BODY_MAX = 8192 // 8KB\nexport const RESPONSE_BODY_MAX = 16384 // 16KB\n// Intentionally aggressive (5ms) to avoid blocking the main thread during fetch body reads.\n// Network body capture uses this as a race timeout - if the body isn't available nearly\n// instantly, we skip it rather than degrade page performance.\nexport const BODY_READ_TIMEOUT_MS = 5\nexport const SENSITIVE_HEADER_PATTERNS =\n  /^(authorization|cookie|set-cookie|x-api-key|x-auth-token|x-secret|x-password|.*token.*|.*secret.*|.*key.*|.*password.*)$/i\nexport const BINARY_CONTENT_TYPES = /^(image|video|audio|font)\\/|^application\\/(wasm|octet-stream|zip|gzip|pdf)/\n\n// DOM query settings\nexport const DOM_QUERY_MAX_ELEMENTS = 50\nexport const DOM_QUERY_MAX_TEXT = 500\nexport const DOM_QUERY_MAX_DEPTH = 5\nexport const DOM_QUERY_MAX_HTML = 200\nexport const A11Y_MAX_NODES_PER_VIOLATION = 10\nexport const ASYNC_COMMAND_TIMEOUT_MS = scaleTimeout(60000)\nexport const A11Y_AUDIT_TIMEOUT_MS = ASYNC_COMMAND_TIMEOUT_MS\n\n// Memory pressure settings\nexport const MEMORY_SOFT_LIMIT_MB = 20\nexport const MEMORY_HARD_LIMIT_MB = 50\n\n// AI Context settings\nexport const AI_CONTEXT_SNIPPET_LINES = 5 // Lines before and after error\nexport const AI_CONTEXT_MAX_LINE_LENGTH = 200 // Truncate lines\nexport const AI_CONTEXT_MAX_SNIPPETS_SIZE = 10240 // 10KB total snippets\nexport const AI_CONTEXT_MAX_ANCESTRY_DEPTH = 10\nexport const AI_CONTEXT_MAX_PROP_KEYS = 20\nexport const AI_CONTEXT_MAX_STATE_KEYS = 10\nexport const AI_CONTEXT_MAX_RELEVANT_SLICE = 10\nexport const AI_CONTEXT_MAX_VALUE_LENGTH = 200\nexport const AI_CONTEXT_SOURCE_MAP_CACHE_SIZE = 20\nexport const AI_CONTEXT_PIPELINE_TIMEOUT_MS = scaleTimeout(3000)\n\n// Reproduction script settings\nexport const ENHANCED_ACTION_BUFFER_SIZE = 50\nexport const CSS_PATH_MAX_DEPTH = 5\nexport const SELECTOR_TEXT_MAX_LENGTH = 50\nexport const SCRIPT_MAX_SIZE = 51200 // 50KB\nexport const CLICKABLE_TAGS: ReadonlySet<string> = new Set(['BUTTON', 'A', 'SUMMARY'])\n\n// Actionable keys for recording\nexport const ACTIONABLE_KEYS: ReadonlySet<string> = new Set([\n  'Enter',\n  'Escape',\n  'Tab',\n  'ArrowUp',\n  'ArrowDown',\n  'ArrowLeft',\n  'ArrowRight',\n  'Backspace',\n  'Delete'\n])\n\n// Performance snapshot settings\nexport const MAX_LONG_TASKS = 50\nexport const MAX_SLOWEST_REQUESTS = 3\nexport const MAX_URL_LENGTH = 80\n\n// =============================================================================\n// SETTING NAMES \u2014 Single source of truth for all toggle/setting message types.\n// Background, content, inject, and popup layers all import from here.\n// =============================================================================\n\n/**\n * Setting names used across background, content, and inject contexts.\n * Single source of truth \u2014 all layers import from here.\n *\n * Note: These are the RUNTIME string values sent as message `type` fields.\n * The TYPE-LEVEL literals in runtime-messages.ts (SetBooleanSettingMessage etc.)\n * are deliberately kept as literal strings for TypeScript discriminated union narrowing.\n */\nexport const SettingName = {\n  NETWORK_WATERFALL: 'setNetworkWaterfallEnabled',\n  PERFORMANCE_MARKS: 'setPerformanceMarksEnabled',\n  ACTION_REPLAY: 'setActionReplayEnabled',\n  WEBSOCKET_CAPTURE: 'setWebSocketCaptureEnabled',\n  WEBSOCKET_CAPTURE_MODE: 'setWebSocketCaptureMode',\n  PERFORMANCE_SNAPSHOT: 'setPerformanceSnapshotEnabled',\n  DEFERRAL: 'setDeferralEnabled',\n  NETWORK_BODY_CAPTURE: 'setNetworkBodyCaptureEnabled',\n  ACTION_TOASTS: 'setActionToastsEnabled',\n  SUBTITLES: 'setSubtitlesEnabled',\n  SERVER_URL: 'setServerUrl',\n} as const\n\nexport type SettingNameValue = typeof SettingName[keyof typeof SettingName]\n\n/** All valid setting names as a Set (for runtime validation) */\nexport const VALID_SETTING_NAMES: ReadonlySet<string> = new Set<string>(Object.values(SettingName))\n\n/**\n * Settings forwarded from background -> content -> inject (MAIN world).\n * These are the settings that the inject script knows how to handle.\n * Content-only settings (ACTION_TOASTS, SUBTITLES) are NOT in this set \u2014\n * they are handled directly by the content script runtime-message-listener.\n */\nexport const INJECT_FORWARDED_SETTINGS: ReadonlySet<string> = new Set<string>([\n  SettingName.NETWORK_WATERFALL,\n  SettingName.PERFORMANCE_MARKS,\n  SettingName.ACTION_REPLAY,\n  SettingName.WEBSOCKET_CAPTURE,\n  SettingName.WEBSOCKET_CAPTURE_MODE,\n  SettingName.PERFORMANCE_SNAPSHOT,\n  SettingName.DEFERRAL,\n  SettingName.NETWORK_BODY_CAPTURE,\n  SettingName.SERVER_URL,\n])\n\n// =============================================================================\n// STORAGE KEYS \u2014 Single source of truth for chrome.storage key strings.\n// =============================================================================\n\n/**\n * Chrome storage key strings used in chrome.storage.local.get/set/remove calls.\n * Single source of truth \u2014 all layers import from here.\n */\nexport const StorageKey = {\n  TRACKED_TAB_ID: 'trackedTabId',\n  TRACKED_TAB_URL: 'trackedTabUrl',\n  TRACKED_TAB_TITLE: 'trackedTabTitle',\n  AI_WEB_PILOT_ENABLED: 'aiWebPilotEnabled',\n  DEBUG_MODE: 'debugMode',\n  SERVER_URL: 'serverUrl',\n  SCREENSHOT_ON_ERROR: 'screenshotOnError',\n  SOURCE_MAP_ENABLED: 'sourceMapEnabled',\n  LOG_LEVEL: 'logLevel',\n  THEME: 'theme',\n  DEFERRAL_ENABLED: 'deferralEnabled',\n  WEBSOCKET_CAPTURE_ENABLED: 'webSocketCaptureEnabled',\n  WEBSOCKET_CAPTURE_MODE: 'webSocketCaptureMode',\n  NETWORK_WATERFALL_ENABLED: 'networkWaterfallEnabled',\n  PERFORMANCE_MARKS_ENABLED: 'performanceMarksEnabled',\n  ACTION_REPLAY_ENABLED: 'actionReplayEnabled',\n  NETWORK_BODY_CAPTURE_ENABLED: 'networkBodyCaptureEnabled',\n  ACTION_TOASTS_ENABLED: 'actionToastsEnabled',\n  SUBTITLES_ENABLED: 'subtitlesEnabled',\n  RECORDING: 'gasoline_recording',\n  PENDING_RECORDING: 'gasoline_pending_recording',\n  PENDING_MIC_RECORDING: 'gasoline_pending_mic_recording',\n  MIC_GRANTED: 'gasoline_mic_granted',\n  RECORD_AUDIO_PREF: 'gasoline_record_audio_pref',\n} as const\n", "/**\n * Purpose: Handles content-script message relay between background and inject contexts.\n * Docs: docs/features/feature/interact-explore/index.md\n * Docs: docs/features/feature/query-dom/index.md\n */\n\n/**\n * @fileoverview Tab Tracking Module\n * Manages tracking status for the current tab\n */\n\nimport type { StorageChange } from '../types'\nimport { StorageKey } from '../lib/constants'\n\n// Whether this content script's tab is the currently tracked tab\nlet isTrackedTab = false\n// The tab ID of this content script's tab\nlet currentTabId: number | null = null\n\n/**\n * Update tracking status by checking storage and current tab ID.\n * Called on script load, storage changes, and tab activation.\n */\nexport async function updateTrackingStatus(): Promise<void> {\n  try {\n    const storage = await chrome.storage.local.get([StorageKey.TRACKED_TAB_ID])\n\n    // Request tab ID from background script (content scripts can't access chrome.tabs)\n    const response = (await chrome.runtime.sendMessage({ type: 'GET_TAB_ID' })) as { tabId?: number } | undefined\n    currentTabId = response?.tabId ?? null\n\n    isTrackedTab = currentTabId !== null && currentTabId !== undefined && currentTabId === storage.trackedTabId\n  } catch {\n    // Graceful degradation: if we can't check, assume not tracked\n    isTrackedTab = false\n  }\n}\n\n/**\n * Get the current tracking status\n */\nexport function getIsTrackedTab(): boolean {\n  return isTrackedTab\n}\n\n/**\n * Get the current tab ID\n */\nexport function getCurrentTabId(): number | null {\n  return currentTabId\n}\n\n/**\n * Initialize tab tracking (call once on script load).\n * Returns a promise that resolves when initial tracking status is known.\n * The onChange callback fires after each status update (initial + storage changes).\n */\nexport function initTabTracking(onChange?: (tracked: boolean) => void): Promise<void> {\n  const ready = updateTrackingStatus().then(() => {\n    onChange?.(isTrackedTab)\n  })\n\n  chrome.storage.onChanged.addListener(async (changes: { [key: string]: StorageChange }) => {\n    if (changes[StorageKey.TRACKED_TAB_ID]) {\n      await updateTrackingStatus()\n      onChange?.(isTrackedTab)\n    }\n  })\n\n  return ready\n}\n", "/**\n * Purpose: Handles content-script message relay between background and inject contexts.\n * Docs: docs/features/feature/interact-explore/index.md\n * Docs: docs/features/feature/query-dom/index.md\n */\n\n/**\n * @fileoverview Script Injection Module\n * Injects capture script into the page context and syncs stored settings\n */\n\nimport type { WebSocketCaptureMode } from '../types'\nimport { SettingName } from '../lib/constants'\n\n/** Whether inject.bundled.js has been injected into the page (MAIN world) */\nlet injected = false\n\n/** Per-page-load nonce for authenticating postMessages to inject.js */\nconst pageNonce = crypto\n  .getRandomValues(new Uint8Array(16))\n  .reduce((s: string, b: number) => s + b.toString(16).padStart(2, '0'), '')\n\n/** Get the page nonce for authenticating postMessages to inject.js */\nexport function getPageNonce(): string {\n  return pageNonce\n}\n\n/** Check if inject script has been loaded into the page context */\nexport function isInjectScriptLoaded(): boolean {\n  return injected\n}\n\n/** Settings that need to be synced to inject script on page load */\nconst SYNC_SETTINGS: readonly {\n  storageKey: string\n  messageType: string\n  isMode?: boolean\n}[] = [\n  { storageKey: 'webSocketCaptureEnabled', messageType: SettingName.WEBSOCKET_CAPTURE },\n  { storageKey: 'webSocketCaptureMode', messageType: SettingName.WEBSOCKET_CAPTURE_MODE, isMode: true },\n  { storageKey: 'networkWaterfallEnabled', messageType: SettingName.NETWORK_WATERFALL },\n  { storageKey: 'performanceMarksEnabled', messageType: SettingName.PERFORMANCE_MARKS },\n  { storageKey: 'actionReplayEnabled', messageType: SettingName.ACTION_REPLAY },\n  { storageKey: 'networkBodyCaptureEnabled', messageType: SettingName.NETWORK_BODY_CAPTURE }\n]\n\n/**\n * Sync stored settings to the inject script after it loads.\n * This ensures new pages receive the current settings state.\n */\nfunction syncStoredSettings(): void {\n  const storageKeys = SYNC_SETTINGS.map((s) => s.storageKey)\n\n  chrome.storage.local.get(storageKeys, (result: Record<string, boolean | string | undefined>) => {\n    for (const setting of SYNC_SETTINGS) {\n      const value = result[setting.storageKey]\n      if (value === undefined) continue // Use default if not set\n\n      if (setting.isMode) {\n        window.postMessage(\n          {\n            type: 'GASOLINE_SETTING',\n            setting: setting.messageType,\n            mode: value as WebSocketCaptureMode,\n            _nonce: pageNonce\n          },\n          window.location.origin\n        )\n      } else {\n        window.postMessage(\n          { type: 'GASOLINE_SETTING', setting: setting.messageType, enabled: value as boolean, _nonce: pageNonce },\n          window.location.origin\n        )\n      }\n    }\n  })\n}\n\n/**\n * Inject axe-core library into the page\n * Must be called from content script context (has chrome.runtime API access)\n */\nexport function injectAxeCore(): void {\n  const script = document.createElement('script')\n  script.src = chrome.runtime.getURL('lib/axe.min.js')\n  script.onload = () => script.remove()\n  ;(document.head || document.documentElement).appendChild(script)\n}\n\n/**\n * Inject the capture script into the page\n */\nexport function injectScript(): void {\n  const script = document.createElement('script')\n  script.src = chrome.runtime.getURL('inject.bundled.js')\n  script.type = 'module'\n  script.dataset.gasolineNonce = pageNonce\n  script.onload = () => {\n    script.remove()\n    injected = true\n    // Sync stored settings after inject script loads\n    // Small delay to ensure inject script has initialized its message listeners\n    setTimeout(syncStoredSettings, 50)\n  }\n  ;(document.head || document.documentElement).appendChild(script)\n}\n\n/**\n * Initialize script injection (call when DOM is ready)\n */\nexport function initScriptInjection(): void {\n  // Inject when DOM is ready\n  if (document.readyState === 'loading') {\n    document.addEventListener(\n      'DOMContentLoaded',\n      () => {\n        injectAxeCore() // Inject axe-core first (needed by inject script)\n        injectScript()\n      },\n      { once: true }\n    )\n  } else {\n    injectAxeCore() // Inject axe-core first (needed by inject script)\n    injectScript()\n  }\n}\n", "/**\n * Purpose: Handles content-script message relay between background and inject contexts.\n * Docs: docs/features/feature/interact-explore/index.md\n * Docs: docs/features/feature/query-dom/index.md\n */\n\n/**\n * @fileoverview Request Tracking Module\n * Manages pending requests for AI Web Pilot features\n * Includes periodic cleanup timer to handle edge cases where pagehide/beforeunload don't fire.\n */\n\nimport type { HighlightResponse, ExecuteJsResult, A11yAuditResult, DomQueryResult } from '../types'\nimport type { PendingRequestStats } from './types'\n\n// Pending highlight response resolvers (keyed by request ID)\nconst pendingHighlightRequests = new Map<number, (result: HighlightResponse) => void>()\nlet highlightRequestId = 0\n\n// Pending execute requests waiting for responses from inject.js\nconst pendingExecuteRequests = new Map<number, (result: ExecuteJsResult) => void>()\nlet executeRequestId = 0\n\n// Pending a11y audit requests waiting for responses from inject.js\nconst pendingA11yRequests = new Map<number, (result: A11yAuditResult) => void>()\nlet a11yRequestId = 0\n\n// Pending DOM query requests waiting for responses from inject.js\nconst pendingDomRequests = new Map<number, (result: DomQueryResult) => void>()\nlet domRequestId = 0\n\n// Periodic cleanup timer (Issue #2 fix)\nconst CLEANUP_INTERVAL_MS = 30000 // 30 seconds\nlet cleanupTimer: ReturnType<typeof setInterval> | null = null\n\n// Track request timestamps for stale detection\nconst requestTimestamps = new Map<number, number>()\n\n/**\n * Get request timestamps for stale detection (Issue #2 fix).\n * Returns array of [requestId, timestamp] pairs for cleanup.\n */\nfunction getRequestTimestamps(): [number, number][] {\n  const timestamps: [number, number][] = []\n  for (const [id, timestamp] of requestTimestamps) {\n    timestamps.push([id, timestamp])\n  }\n  return timestamps\n}\n\n/**\n * Clear all pending request Maps on page unload (Issue 2 fix).\n * Prevents memory leaks and stale request accumulation across navigations.\n */\nexport function clearPendingRequests(): void {\n  pendingHighlightRequests.clear()\n  pendingExecuteRequests.clear()\n  pendingA11yRequests.clear()\n  pendingDomRequests.clear()\n  requestTimestamps.clear()\n}\n\n/**\n * Perform periodic cleanup of stale requests (Issue #2 fix).\n * Removes requests older than 60 seconds as a fallback when pagehide/beforeunload don't fire.\n */\nfunction performPeriodicCleanup(): void {\n  const now = Date.now()\n  const staleThreshold = 60000 // 60 seconds\n\n  for (const [id, timestamp] of getRequestTimestamps()) {\n    if (now - timestamp > staleThreshold) {\n      // Remove stale request from all maps\n      pendingHighlightRequests.delete(id)\n      pendingExecuteRequests.delete(id)\n      pendingA11yRequests.delete(id)\n      pendingDomRequests.delete(id)\n      requestTimestamps.delete(id)\n    }\n  }\n}\n\n/**\n * Get statistics about pending requests (for testing/debugging)\n * @returns Counts of pending requests by type\n */\nexport function getPendingRequestStats(): PendingRequestStats {\n  return {\n    highlight: pendingHighlightRequests.size,\n    execute: pendingExecuteRequests.size,\n    a11y: pendingA11yRequests.size,\n    dom: pendingDomRequests.size\n  }\n}\n\n/**\n * Get the next highlight request ID and register a resolver\n */\nexport function registerHighlightRequest(resolve: (result: HighlightResponse) => void): number {\n  const requestId = ++highlightRequestId\n  pendingHighlightRequests.set(requestId, resolve)\n  return requestId\n}\n\n/**\n * Resolve a highlight request\n */\nexport function resolveHighlightRequest(requestId: number, result: HighlightResponse): void {\n  const resolve = pendingHighlightRequests.get(requestId)\n  if (resolve) {\n    pendingHighlightRequests.delete(requestId)\n    resolve(result)\n  }\n}\n\n/**\n * Check if a highlight request exists\n */\nexport function hasHighlightRequest(requestId: number): boolean {\n  return pendingHighlightRequests.has(requestId)\n}\n\n/**\n * Delete a highlight request without resolving\n */\nexport function deleteHighlightRequest(requestId: number): void {\n  pendingHighlightRequests.delete(requestId)\n}\n\n/**\n * Get the next execute request ID and register a resolver\n */\nexport function registerExecuteRequest(resolve: (result: ExecuteJsResult) => void): number {\n  const requestId = ++executeRequestId\n  pendingExecuteRequests.set(requestId, resolve)\n  return requestId\n}\n\n/**\n * Resolve an execute request\n */\nexport function resolveExecuteRequest(requestId: number, result: ExecuteJsResult): void {\n  const resolve = pendingExecuteRequests.get(requestId)\n  if (resolve) {\n    pendingExecuteRequests.delete(requestId)\n    resolve(result)\n  }\n}\n\n/**\n * Check if an execute request exists\n */\nexport function hasExecuteRequest(requestId: number): boolean {\n  return pendingExecuteRequests.has(requestId)\n}\n\n/**\n * Delete an execute request without resolving\n */\nexport function deleteExecuteRequest(requestId: number): void {\n  pendingExecuteRequests.delete(requestId)\n}\n\n/**\n * Get the next a11y request ID and register a resolver\n */\nexport function registerA11yRequest(resolve: (result: A11yAuditResult) => void): number {\n  const requestId = ++a11yRequestId\n  pendingA11yRequests.set(requestId, resolve)\n  return requestId\n}\n\n/**\n * Resolve an a11y request\n */\nexport function resolveA11yRequest(requestId: number, result: A11yAuditResult): void {\n  const resolve = pendingA11yRequests.get(requestId)\n  if (resolve) {\n    pendingA11yRequests.delete(requestId)\n    resolve(result)\n  }\n}\n\n/**\n * Check if an a11y request exists\n */\nexport function hasA11yRequest(requestId: number): boolean {\n  return pendingA11yRequests.has(requestId)\n}\n\n/**\n * Delete an a11y request without resolving\n */\nexport function deleteA11yRequest(requestId: number): void {\n  pendingA11yRequests.delete(requestId)\n}\n\n/**\n * Get the next DOM request ID and register a resolver\n */\nexport function registerDomRequest(resolve: (result: DomQueryResult) => void): number {\n  const requestId = ++domRequestId\n  pendingDomRequests.set(requestId, resolve)\n  return requestId\n}\n\n/**\n * Resolve a DOM request\n */\nexport function resolveDomRequest(requestId: number, result: DomQueryResult): void {\n  const resolve = pendingDomRequests.get(requestId)\n  if (resolve) {\n    pendingDomRequests.delete(requestId)\n    resolve(result)\n  }\n}\n\n/**\n * Check if a DOM request exists\n */\nexport function hasDomRequest(requestId: number): boolean {\n  return pendingDomRequests.has(requestId)\n}\n\n/**\n * Delete a DOM request without resolving\n */\nexport function deleteDomRequest(requestId: number): void {\n  pendingDomRequests.delete(requestId)\n}\n\n/**\n * Cleanup periodic timer (Issue #2 fix).\n * Should be called when content script is shutting down.\n */\nexport function cleanupRequestTracking(): void {\n  if (cleanupTimer) {\n    clearInterval(cleanupTimer)\n    cleanupTimer = null\n  }\n  clearPendingRequests()\n}\n\n/**\n * Initialize request tracking (register cleanup handlers)\n */\nexport function initRequestTracking(): void {\n  // Register cleanup handlers for page unload/navigation (Issue 2 fix)\n  // Using 'pagehide' (modern, fires on both close and navigation) + 'beforeunload' (legacy fallback)\n  window.addEventListener('pagehide', clearPendingRequests)\n  window.addEventListener('beforeunload', clearPendingRequests)\n\n  // Start periodic cleanup timer (Issue #2 fix)\n  // Provides fallback when pagehide/beforeunload don't fire (e.g., page crash)\n  cleanupTimer = setInterval(performPeriodicCleanup, CLEANUP_INTERVAL_MS)\n}\n", "/**\n * Purpose: Handles content-script message relay between background and inject contexts.\n * Docs: docs/features/feature/interact-explore/index.md\n * Docs: docs/features/feature/query-dom/index.md\n */\n\n/**\n * @fileoverview Message Forwarding Module\n * Forwards messages between page context and background script\n */\n\nimport type { BackgroundMessageFromContent } from './types'\n\n// Dispatch table: page postMessage type -> background message type\nexport const MESSAGE_MAP: Record<string, string> = {\n  GASOLINE_LOG: 'log',\n  GASOLINE_WS: 'ws_event',\n  GASOLINE_NETWORK_BODY: 'network_body',\n  GASOLINE_ENHANCED_ACTION: 'enhanced_action',\n  GASOLINE_PERFORMANCE_SNAPSHOT: 'performance_snapshot'\n} as const\n\n// Track whether the extension context is still valid\nlet contextValid = true\n\n/**\n * Safely send a message to the background script\n * Handles extension context invalidation gracefully\n */\nexport function safeSendMessage(msg: BackgroundMessageFromContent): void {\n  if (!contextValid) return\n  try {\n    chrome.runtime.sendMessage(msg)\n  } catch (e) {\n    if (e instanceof Error && e.message?.includes('Extension context invalidated')) {\n      contextValid = false\n      console.warn(\n        '[Gasoline] Please refresh this page. The Gasoline extension was reloaded ' +\n          'and this page still has the old content script. A page refresh will ' +\n          'reconnect capture automatically.'\n      )\n    }\n  }\n}\n\n/**\n * Check if the extension context is still valid\n */\nexport function isContextValid(): boolean {\n  return contextValid\n}\n", "/**\n * Purpose: Handles content-script message relay between background and inject contexts.\n * Docs: docs/features/feature/interact-explore/index.md\n * Docs: docs/features/feature/query-dom/index.md\n */\n\n/**\n * @fileoverview Window Message Listener Module\n * Handles window.postMessage events from inject.js\n */\n\nimport type { HighlightResponse, ExecuteJsResult, A11yAuditResult, DomQueryResult } from '../types'\nimport type { PageMessageEventData, BackgroundMessageFromContent } from './types'\nimport {\n  resolveHighlightRequest,\n  resolveExecuteRequest,\n  resolveA11yRequest,\n  resolveDomRequest\n} from './request-tracking'\nimport { MESSAGE_MAP, safeSendMessage } from './message-forwarding'\nimport { getIsTrackedTab, getCurrentTabId } from './tab-tracking'\n\n/**\n * Initialize consolidated window message listener\n * Handles all messages from inject.js\n */\ntype ResponseResolver = (requestId: number | string, result: unknown) => void\n\nconst RESPONSE_HANDLERS: Record<string, ResponseResolver> = {\n  GASOLINE_HIGHLIGHT_RESPONSE: (id, result) => resolveHighlightRequest(id as number, result as HighlightResponse),\n  GASOLINE_EXECUTE_JS_RESULT: (id, result) => resolveExecuteRequest(id as number, result as ExecuteJsResult),\n  GASOLINE_A11Y_QUERY_RESPONSE: (id, result) => resolveA11yRequest(id as number, result as A11yAuditResult),\n  GASOLINE_DOM_QUERY_RESPONSE: (id, result) => resolveDomRequest(id as number, result as DomQueryResult)\n}\n\nexport function initWindowMessageListener(): void {\n  window.addEventListener('message', (event: MessageEvent<PageMessageEventData>) => {\n    if (event.source !== window || event.origin !== window.location.origin) return\n\n    const { type: messageType, requestId, result, payload } = event.data || {}\n\n    const responseHandler = messageType ? RESPONSE_HANDLERS[messageType] : undefined\n    if (responseHandler) {\n      if (requestId !== undefined) responseHandler(requestId, result)\n      return\n    }\n\n    // Tab isolation filter: only forward captured data from the tracked tab.\n    // Response messages (highlight, execute JS, a11y) are NOT filtered because\n    // they are responses to explicit commands from the background script.\n    if (!getIsTrackedTab()) return\n\n    if (messageType && messageType in MESSAGE_MAP && payload && typeof payload === 'object') {\n      const mappedType = MESSAGE_MAP[messageType]\n      if (mappedType) {\n        safeSendMessage({\n          type: mappedType,\n          payload,\n          tabId: getCurrentTabId()\n        } as BackgroundMessageFromContent)\n      }\n    }\n  })\n}\n", "/**\n * Purpose: Handles content-script message relay between background and inject contexts.\n * Docs: docs/features/feature/interact-explore/index.md\n * Docs: docs/features/feature/query-dom/index.md\n */\n\n/**\n * @fileoverview Timeout Utilities for Content Script\n * Inlined utilities for promise timeout handling\n * Content scripts cannot use ES module imports, so these utilities are duplicated\n */\n\n/** Custom error for timeout operations */\nexport class TimeoutError extends Error {\n  constructor(\n    message: string,\n    public fallback?: unknown\n  ) {\n    super(message)\n    this.name = 'TimeoutError'\n  }\n}\n\n/** Deferred Promise interface */\nexport interface DeferredPromise<T> {\n  promise: Promise<T>\n  resolve: (value: T | PromiseLike<T>) => void\n  reject: (reason?: unknown) => void\n}\n\n/** Create a deferred promise for external resolution */\nexport function createDeferredPromise<T>(): DeferredPromise<T> {\n  let resolve!: (value: T | PromiseLike<T>) => void\n  let reject!: (reason?: unknown) => void\n\n  const promise = new Promise<T>((res, rej) => {\n    resolve = res\n    reject = rej\n  })\n\n  return { promise, resolve, reject }\n}\n\n/** Race a promise against a timeout with cleanup on timeout */\nexport async function promiseRaceWithCleanup<T>(\n  promise: Promise<T>,\n  timeoutMs: number,\n  timeoutFallback: T | undefined,\n  cleanup?: () => void\n): Promise<T> {\n  try {\n    return await Promise.race([\n      promise,\n      new Promise<T>((_, reject) =>\n        setTimeout(() => {\n          cleanup?.()\n          if (timeoutFallback !== undefined) {\n            reject(new TimeoutError(`Operation timed out after ${timeoutMs}ms`, timeoutFallback))\n          } else {\n            reject(new TimeoutError(`Operation timed out after ${timeoutMs}ms`))\n          }\n        }, timeoutMs)\n      )\n    ])\n  } catch (err) {\n    if (err instanceof TimeoutError && err.fallback !== undefined) {\n      return err.fallback as T\n    }\n    throw err\n  }\n}\n", "/**\n * Purpose: Handles content-script message relay between background and inject contexts.\n * Docs: docs/features/feature/interact-explore/index.md\n * Docs: docs/features/feature/query-dom/index.md\n */\n\n/**\n * @fileoverview Message Handlers Module\n * Handles messages from background script\n */\n\nimport type {\n  ContentMessage,\n  ContentPingResponse,\n  WebSocketCaptureMode,\n  HighlightResponse,\n  WaterfallEntry,\n  StateAction,\n  BrowserStateSnapshot,\n  A11yAuditResult\n} from '../types'\nimport type { SettingMessage } from './types'\nimport {\n  registerHighlightRequest,\n  hasHighlightRequest,\n  deleteHighlightRequest,\n  registerExecuteRequest,\n  hasExecuteRequest,\n  deleteExecuteRequest,\n  registerA11yRequest,\n  hasA11yRequest,\n  deleteA11yRequest,\n  registerDomRequest,\n  hasDomRequest,\n  deleteDomRequest\n} from './request-tracking'\nimport { createDeferredPromise, promiseRaceWithCleanup } from './timeout-utils'\nimport { isInjectScriptLoaded, getPageNonce } from './script-injection'\nimport { ASYNC_COMMAND_TIMEOUT_MS, INJECT_FORWARDED_SETTINGS, SettingName } from '../lib/constants'\n\n/** Auto-incrementing request ID \u2014 avoids Date.now() collisions for concurrent queries */\nlet nextRequestId = 1\n\n/** Parse query params from string (JSON) or object form into a plain object */\nfunction parseQueryParams(params: string | Record<string, unknown>): Record<string, unknown> {\n  if (typeof params === 'string') {\n    try { return JSON.parse(params) } catch { return {} }\n  }\n  return typeof params === 'object' ? params : {}\n}\n\n/** Send a nonce-authenticated message to inject.js (MAIN world) */\nfunction postToInject(data: Record<string, unknown>): void {\n  window.postMessage({ ...data, _nonce: getPageNonce() }, window.location.origin)\n}\n\n// Feature toggle message types forwarded from background to inject.js \u2014 imported from canonical constants.\nexport const TOGGLE_MESSAGES = INJECT_FORWARDED_SETTINGS\n\n/**\n * Security: Validate sender is from the extension background script\n * Prevents content script from trusting messages from compromised page context\n */\nexport function isValidBackgroundSender(sender: chrome.runtime.MessageSender): boolean {\n  // Messages from background should NOT have a tab (or have tab with chrome-extension:// url)\n  // Messages from content scripts have tab.id\n  // We only want messages from the background service worker\n  return typeof sender.id === 'string' && sender.id === chrome.runtime.id\n}\n\n/**\n * Forward a highlight message from background to inject.js\n */\nexport function forwardHighlightMessage(message: {\n  params: { selector: string; duration_ms?: number }\n}): Promise<HighlightResponse> {\n  const requestId = registerHighlightRequest((result) => deferred.resolve(result))\n  const deferred = createDeferredPromise<HighlightResponse>()\n\n  // Post message to page context (inject.js)\n  postToInject({\n    type: 'GASOLINE_HIGHLIGHT_REQUEST',\n    requestId,\n    params: message.params\n  })\n\n  // Timeout fallback + cleanup stale entries after 30 seconds\n  return promiseRaceWithCleanup(deferred.promise, 30000, { success: false, error: 'timeout' }, () => {\n    if (hasHighlightRequest(requestId)) {\n      deleteHighlightRequest(requestId)\n    }\n  })\n}\n\n/**\n * Handle state capture/restore commands\n */\nexport async function handleStateCommand(\n  params:\n    | {\n        action?: StateAction\n        name?: string\n        state?: BrowserStateSnapshot\n        include_url?: boolean\n      }\n    | undefined\n): Promise<{ error?: string; [key: string]: unknown }> {\n  const { action, name, state, include_url } = params || {}\n\n  // Create a promise to receive response from inject.js\n  const messageId = `state_${Date.now()}_${Math.random().toString(36).slice(2)}`\n  const deferred = createDeferredPromise<{ error?: string; [key: string]: unknown }>()\n\n  // Set up listener for response from inject.js\n  const responseHandler = (\n    event: MessageEvent<{ type?: string; messageId?: string; result?: { error?: string; [key: string]: unknown } }>\n  ) => {\n    if (event.source !== window) return\n    if (event.data?.type === 'GASOLINE_STATE_RESPONSE' && event.data?.messageId === messageId) {\n      window.removeEventListener('message', responseHandler)\n      deferred.resolve(event.data.result || { error: 'No result from state command' })\n    }\n  }\n  window.addEventListener('message', responseHandler)\n\n  // Send command to inject.js (include state for restore action)\n  postToInject({\n    type: 'GASOLINE_STATE_COMMAND',\n    messageId,\n    action,\n    name,\n    state,\n    include_url\n  })\n\n  // Timeout after 5 seconds with cleanup\n  return promiseRaceWithCleanup(deferred.promise, 5000, { error: 'State command timeout' }, () =>\n    window.removeEventListener('message', responseHandler)\n  )\n}\n\n/**\n * Handle GASOLINE_PING message\n */\nexport function handlePing(sendResponse: (response: ContentPingResponse) => void): boolean {\n  sendResponse({ status: 'alive', timestamp: Date.now() })\n  return true\n}\n\n/**\n * Handle toggle messages\n */\nexport function handleToggleMessage(\n  message: ContentMessage & { enabled?: boolean; mode?: WebSocketCaptureMode; url?: string }\n): void {\n  if (!TOGGLE_MESSAGES.has(message.type)) return\n\n  const payload: SettingMessage = { type: 'GASOLINE_SETTING', setting: message.type }\n  if (message.type === SettingName.WEBSOCKET_CAPTURE_MODE) {\n    payload.mode = message.mode\n  } else if (message.type === SettingName.SERVER_URL) {\n    payload.url = message.url\n  } else {\n    payload.enabled = message.enabled\n  }\n  // SECURITY: Use explicit targetOrigin (window.location.origin) not \"*\"\n  window.postMessage({ ...payload, _nonce: getPageNonce() }, window.location.origin)\n}\n\n// ============================================\n// Execute JS Handlers (MAIN world via inject script)\n// Background handles world routing and fallback to chrome.scripting API.\n// ============================================\n\ntype ExecuteJsResponse = { success: boolean; error?: string; message?: string; result?: unknown; stack?: string }\n\n/**\n * Execute JS in the MAIN world via inject script, with safety timeout.\n */\nfunction executeInMainWorld(\n  params: { script?: string; timeout_ms?: number },\n  sendResponse: (result: ExecuteJsResponse) => void\n): void {\n  const timeoutMs = params.timeout_ms || 5000\n  const requestId = registerExecuteRequest(sendResponse)\n\n  // Safety timeout: user's timeout + 2s buffer (NOT fixed 30s)\n  // If inject script responds, its own timeout handles slow scripts.\n  // This only fires if inject script never responds at all.\n  const safetyTimeoutMs = timeoutMs + 2000\n  setTimeout(() => {\n    if (hasExecuteRequest(requestId)) {\n      deleteExecuteRequest(requestId)\n      sendResponse({\n        success: false,\n        error: 'inject_not_responding',\n        message: `Inject script did not respond within ${safetyTimeoutMs}ms. The tab may not be tracked or the inject script failed to load.`\n      })\n    }\n  }, safetyTimeoutMs)\n\n  postToInject({\n    type: 'GASOLINE_EXECUTE_JS',\n    requestId,\n    script: params.script || '',\n    timeoutMs\n  })\n}\n\n/**\n * Handle GASOLINE_EXECUTE_JS message.\n * Always executes in MAIN world via inject script.\n * Returns inject_not_loaded error if inject script isn't available,\n * so background can fallback to chrome.scripting API.\n */\nexport function handleExecuteJs(\n  params: { script?: string; timeout_ms?: number },\n  sendResponse: (result: ExecuteJsResponse) => void\n): boolean {\n  if (!isInjectScriptLoaded()) {\n    sendResponse({\n      success: false,\n      error: 'inject_not_loaded',\n      message: 'Inject script not loaded in page context. Tab may not be tracked.'\n    })\n    return true\n  }\n\n  executeInMainWorld(params, sendResponse)\n  return true\n}\n\n/**\n * Handle GASOLINE_EXECUTE_QUERY message (async command path)\n */\nexport function handleExecuteQuery(\n  params: string | Record<string, unknown>,\n  sendResponse: (result: ExecuteJsResponse) => void\n): boolean {\n  let parsedParams: { script?: string; timeout_ms?: number } = {}\n  if (typeof params === 'string') {\n    try {\n      parsedParams = JSON.parse(params)\n    } catch {\n      parsedParams = {}\n    }\n  } else if (typeof params === 'object') {\n    parsedParams = params as { script?: string; timeout_ms?: number }\n  }\n\n  return handleExecuteJs(parsedParams, sendResponse)\n}\n\n/**\n * Handle A11Y_QUERY message\n */\nexport function handleA11yQuery(\n  params: string | Record<string, unknown>,\n  sendResponse: (result: A11yAuditResult | { error: string }) => void\n): boolean {\n  const parsedParams = parseQueryParams(params)\n  const requestId = registerA11yRequest(sendResponse)\n\n  // Timeout fallback: respond with error and cleanup the real pending map\n  setTimeout(() => {\n    if (hasA11yRequest(requestId)) {\n      deleteA11yRequest(requestId)\n      sendResponse({ error: 'Accessibility audit timeout' })\n    }\n  }, ASYNC_COMMAND_TIMEOUT_MS)\n\n  // Forward to inject.js via postMessage\n  postToInject({\n    type: 'GASOLINE_A11Y_QUERY',\n    requestId,\n    params: parsedParams\n  })\n\n  return true\n}\n\n/**\n * Handle DOM_QUERY message\n */\nexport function handleDomQuery(\n  params: string | Record<string, unknown>,\n  sendResponse: (result: { error?: string; matches?: unknown[] }) => void\n): boolean {\n  const parsedParams = parseQueryParams(params)\n  const requestId = registerDomRequest(sendResponse)\n\n  // Timeout fallback: respond with error and cleanup the real pending map\n  setTimeout(() => {\n    if (hasDomRequest(requestId)) {\n      deleteDomRequest(requestId)\n      sendResponse({ error: 'DOM query timeout' })\n    }\n  }, ASYNC_COMMAND_TIMEOUT_MS)\n\n  // Forward to inject.js via postMessage\n  postToInject({\n    type: 'GASOLINE_DOM_QUERY',\n    requestId,\n    params: parsedParams\n  })\n\n  return true\n}\n\n/**\n * Handle GET_NETWORK_WATERFALL message\n */\nexport function handleGetNetworkWaterfall(sendResponse: (result: { entries: WaterfallEntry[] }) => void): boolean {\n  const requestId = nextRequestId++\n  const deferred = createDeferredPromise<{ entries: WaterfallEntry[] }>()\n\n  // Set up a one-time listener for the response\n  const responseHandler = (event: MessageEvent<{ type?: string; entries?: WaterfallEntry[] }>) => {\n    if (event.source !== window) return\n    if (event.data?.type === 'GASOLINE_WATERFALL_RESPONSE') {\n      window.removeEventListener('message', responseHandler)\n      deferred.resolve({ entries: event.data.entries || [] })\n    }\n  }\n\n  window.addEventListener('message', responseHandler)\n\n  // Post message to page context\n  postToInject({\n    type: 'GASOLINE_GET_WATERFALL',\n    requestId\n  })\n\n  // Timeout fallback: respond with empty array after 5 seconds\n  promiseRaceWithCleanup(deferred.promise, 5000, { entries: [] }, () => {\n    window.removeEventListener('message', responseHandler)\n  }).then(\n    (result) => {\n      sendResponse(result)\n    },\n    () => {\n      sendResponse({ entries: [] })\n    }\n  )\n\n  return true\n}\n\n/**\n * Generic inject-query forwarder: parse params, post to inject, wait for response with timeout.\n * Consolidates the identical pattern used by computed_styles, form_discovery, and link_health.\n */\nfunction forwardInjectQuery(\n  queryType: string,\n  responseType: string,\n  label: string,\n  params: string | Record<string, unknown>,\n  sendResponse: (result: unknown) => void\n): boolean {\n  const parsedParams = parseQueryParams(params)\n  const requestId = nextRequestId++\n  const deferred = createDeferredPromise<unknown>()\n\n  const responseHandler = (event: MessageEvent<{ type?: string; result?: unknown }>) => {\n    if (event.source !== window) return\n    if (event.data?.type === responseType) {\n      window.removeEventListener('message', responseHandler)\n      deferred.resolve(event.data.result || { error: `No result from ${label}` })\n    }\n  }\n\n  window.addEventListener('message', responseHandler)\n  postToInject({ type: queryType, requestId, params: parsedParams })\n\n  promiseRaceWithCleanup(deferred.promise, ASYNC_COMMAND_TIMEOUT_MS, { error: `${label} timeout` }, () => {\n    window.removeEventListener('message', responseHandler)\n  }).then(\n    (result) => sendResponse(result),\n    () => sendResponse({ error: `${label} failed` })\n  )\n\n  return true\n}\n\nexport function handleComputedStylesQuery(\n  params: string | Record<string, unknown>,\n  sendResponse: (result: unknown) => void\n): boolean {\n  return forwardInjectQuery('GASOLINE_COMPUTED_STYLES_QUERY', 'GASOLINE_COMPUTED_STYLES_RESPONSE', 'Computed styles query', params, sendResponse)\n}\n\nexport function handleFormDiscoveryQuery(\n  params: string | Record<string, unknown>,\n  sendResponse: (result: unknown) => void\n): boolean {\n  return forwardInjectQuery('GASOLINE_FORM_DISCOVERY_QUERY', 'GASOLINE_FORM_DISCOVERY_RESPONSE', 'Form discovery', params, sendResponse)\n}\n\nexport function handleLinkHealthQuery(\n  params: string | Record<string, unknown>,\n  sendResponse: (result: unknown) => void\n): boolean {\n  return forwardInjectQuery('GASOLINE_LINK_HEALTH_QUERY', 'GASOLINE_LINK_HEALTH_RESPONSE', 'Link health check', params, sendResponse)\n}\n", "// toast.ts \u2014 Action toast overlay rendering for AI-driven browser actions.\n\n/** Color themes for each toast state */\nconst TOAST_THEMES: Record<string, { bg: string; shadow: string }> = {\n  trying: { bg: 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)', shadow: 'rgba(59, 130, 246, 0.4)' },\n  success: { bg: 'linear-gradient(135deg, #22c55e 0%, #16a34a 100%)', shadow: 'rgba(34, 197, 94, 0.4)' },\n  warning: { bg: 'linear-gradient(135deg, #f59e0b 0%, #d97706 100%)', shadow: 'rgba(245, 158, 11, 0.4)' },\n  error: { bg: 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)', shadow: 'rgba(239, 68, 68, 0.4)' },\n  audio: { bg: 'linear-gradient(135deg, #f97316 0%, #ea580c 100%)', shadow: 'rgba(249, 115, 22, 0.5)' }\n}\n\n/** Pre-built CSS for toast animations \u2014 extracted to reduce function complexity */\n// nosemgrep: missing-template-string-indicator\nconst TOAST_ANIMATION_CSS = [\n  '@keyframes gasolineArrowBounceUp {',\n  '  0%, 100% { transform: translateY(0); opacity: 1; }',\n  '  50% { transform: translateY(-6px); opacity: 0.7; }',\n  '}',\n  '@keyframes gasolineToastPulse {',\n  '  0%, 100% { box-shadow: 0 4px 20px var(--toast-shadow); }',\n  '  50% { box-shadow: 0 8px 32px var(--toast-shadow-intense); }',\n  '}',\n  '.gasoline-toast-arrow {',\n  '  display: inline-block; margin-left: 8px;',\n  '  animation: gasolineArrowBounceUp 1.5s ease-in-out infinite;',\n  '}',\n  '.gasoline-toast-pulse { animation: gasolineToastPulse 2s ease-in-out infinite; }'\n].join('\\n')\n\n/** Add animation keyframes to document */\nfunction injectToastAnimationStyles(): void {\n  if (document.getElementById('gasoline-toast-animations')) return\n  const style = document.createElement('style')\n  style.id = 'gasoline-toast-animations'\n  style.textContent = TOAST_ANIMATION_CSS\n  document.head.appendChild(style)\n}\n\n/** Truncate text to maxLen characters with ellipsis */\nfunction truncateText(text: string, maxLen: number): string {\n  if (text.length <= maxLen) return text\n  return text.slice(0, maxLen - 1) + '\\u2026'\n}\n\n/**\n * Show a brief visual toast overlay for AI actions.\n * Supports color-coded states and structured content with truncation.\n * For audio-related toasts, adds animated arrow pointing to extension icon.\n */\n// #lizard forgives\nexport function showActionToast(\n  text: string,\n  detail?: string,\n  state: 'trying' | 'success' | 'warning' | 'error' | 'audio' = 'trying',\n  durationMs = 3000\n): void {\n  // Remove existing toast\n  const existing = document.getElementById('gasoline-action-toast')\n  if (existing) existing.remove()\n\n  // Inject animation styles once\n  injectToastAnimationStyles()\n\n  const theme = TOAST_THEMES[state] ?? TOAST_THEMES.trying!\n  const isAudioPrompt =\n    state === 'audio' || (detail && detail.toLowerCase().includes('audio') && detail.toLowerCase().includes('click'))\n\n  const arrowChar = '\\u2191'\n\n  const toast = document.createElement('div')\n  toast.id = 'gasoline-action-toast'\n  if (isAudioPrompt) {\n    toast.className = 'gasoline-toast-pulse'\n  }\n\n  // Add gasoline icon for audio/extension-click prompts\n  if (isAudioPrompt) {\n    const icon = document.createElement('img')\n    icon.src = chrome.runtime.getURL('icons/icon-48.png')\n    Object.assign(icon.style, {\n      width: '20px',\n      height: '20px',\n      marginRight: '8px',\n      flexShrink: '0'\n    })\n    toast.appendChild(icon)\n  }\n\n  // Build content: label + truncated detail\n  const label = document.createElement('span')\n  label.textContent = truncateText(text, 30)\n  Object.assign(label.style, { fontWeight: '700' })\n  toast.appendChild(label)\n\n  if (detail) {\n    const sep = document.createElement('span')\n    sep.textContent = '  '\n    Object.assign(sep.style, { opacity: '0.6', margin: '0 4px' })\n    toast.appendChild(sep)\n\n    const det = document.createElement('span')\n    det.textContent = truncateText(detail, 50)\n    Object.assign(det.style, { fontWeight: '400', opacity: '0.9' })\n    toast.appendChild(det)\n  }\n\n  // Add animated arrow for audio prompts (pointing to extension toolbar)\n  if (isAudioPrompt) {\n    const arrow = document.createElement('span')\n    arrow.className = 'gasoline-toast-arrow'\n    arrow.textContent = arrowChar\n    Object.assign(arrow.style, {\n      fontSize: '16px',\n      fontWeight: '700',\n      marginLeft: '12px',\n      display: 'inline-block'\n    })\n    toast.appendChild(arrow)\n  }\n\n  Object.assign(toast.style, {\n    position: 'fixed',\n    top: '16px',\n    right: isAudioPrompt ? '80px' : 'auto',\n    left: isAudioPrompt ? 'auto' : '50%',\n    transform: isAudioPrompt ? 'none' : 'translateX(-50%)',\n    padding: isAudioPrompt ? '12px 24px' : '8px 20px',\n    background: theme.bg,\n    color: '#fff',\n    fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n    fontSize: isAudioPrompt ? '14px' : '13px',\n    fontWeight: isAudioPrompt ? '600' : '400',\n    borderRadius: '8px',\n    boxShadow: `0 4px 20px ${theme.shadow}`,\n    zIndex: '2147483647',\n    pointerEvents: 'none',\n    opacity: '0',\n    transition: 'opacity 0.2s ease-in',\n    maxWidth: isAudioPrompt ? '320px' : '500px',\n    whiteSpace: isAudioPrompt ? 'normal' : ('nowrap' as const),\n    overflow: isAudioPrompt ? 'visible' : 'hidden',\n    display: 'flex',\n    alignItems: 'center',\n    gap: '0',\n    '--toast-shadow': theme.shadow,\n    '--toast-shadow-intense': theme.shadow.replace('0.4)', '0.7)')\n  } as Record<string, string>)\n\n  const target = document.body || document.documentElement\n  if (!target) return\n  target.appendChild(toast)\n\n  // Fade in\n  requestAnimationFrame(() => {\n    toast.style.opacity = '1'\n  })\n\n  // Fade out and remove\n  setTimeout(() => {\n    toast.style.opacity = '0'\n    setTimeout(() => toast.remove(), 300)\n  }, durationMs)\n}\n", "// subtitle.ts \u2014 Subtitle overlay, recording watermark, and shared DOM helpers for content UI.\n\n/** Active Escape key listener reference for subtitle dismiss */\nlet subtitleEscapeHandler: ((e: KeyboardEvent) => void) | null = null\n\n/** Fade out a DOM element and remove it after transition completes */\n// #lizard forgives\nfunction fadeOutAndRemove(elementId: string, delayMs: number): void {\n  const el = document.getElementById(elementId)\n  if (!el) return\n  el.style.opacity = '0'\n  setTimeout(() => el.remove(), delayMs)\n}\n\n/** Detach the active Escape key listener if one exists */\nfunction detachEscapeListener(): void {\n  if (!subtitleEscapeHandler) return\n  document.removeEventListener('keydown', subtitleEscapeHandler)\n  subtitleEscapeHandler = null\n}\n\n/**\n * Remove the subtitle element, clean up Escape listener.\n */\nexport function clearSubtitle(): void {\n  fadeOutAndRemove('gasoline-subtitle', 200)\n  detachEscapeListener()\n}\n\n/**\n * Show or update a persistent subtitle bar at the bottom of the viewport.\n * Empty text clears the subtitle. Includes a hover close button and\n * Escape key listener for dismissal.\n */\nexport function showSubtitle(text: string): void {\n  const ELEMENT_ID = 'gasoline-subtitle'\n  const CLOSE_BTN_ID = 'gasoline-subtitle-close'\n\n  if (!text) {\n    clearSubtitle()\n    return\n  }\n\n  let bar = document.getElementById(ELEMENT_ID)\n  if (!bar) {\n    bar = document.createElement('div')\n    bar.id = ELEMENT_ID\n    Object.assign(bar.style, {\n      position: 'fixed',\n      bottom: '24px',\n      left: '50%',\n      transform: 'translateX(-50%)',\n      width: 'auto',\n      maxWidth: '80%',\n      padding: '12px 20px',\n      background: 'rgba(0, 0, 0, 0.85)',\n      color: '#fff',\n      fontFamily: '-apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, sans-serif',\n      fontSize: '16px',\n      lineHeight: '1.4',\n      textAlign: 'center',\n      borderRadius: '4px',\n      zIndex: '2147483646',\n      pointerEvents: 'auto',\n      opacity: '0',\n      transition: 'opacity 0.2s ease-in',\n      maxHeight: '4.2em', // ~3 lines\n      overflow: 'hidden',\n      textOverflow: 'ellipsis',\n      boxSizing: 'border-box'\n    })\n\n    // Close button \u2014 visible only on hover over the subtitle bar\n    const closeBtn = document.createElement('button')\n    closeBtn.id = CLOSE_BTN_ID\n    closeBtn.textContent = '\\u00d7' // multiplication sign (x)\n    Object.assign(closeBtn.style, {\n      position: 'absolute',\n      top: '-6px',\n      right: '-6px',\n      width: '16px',\n      height: '16px',\n      padding: '0',\n      margin: '0',\n      border: 'none',\n      borderRadius: '50%',\n      background: 'rgba(255, 255, 255, 0.25)',\n      color: '#fff',\n      fontSize: '12px',\n      lineHeight: '16px',\n      textAlign: 'center',\n      cursor: 'pointer',\n      pointerEvents: 'auto',\n      opacity: '0',\n      transition: 'opacity 0.15s ease-in',\n      fontFamily: 'sans-serif'\n    })\n    closeBtn.addEventListener('click', (e: MouseEvent) => {\n      e.stopPropagation()\n      clearSubtitle()\n    })\n    bar.appendChild(closeBtn)\n\n    // Show close button on hover\n    bar.addEventListener('mouseenter', () => {\n      const btn = document.getElementById(CLOSE_BTN_ID)\n      if (btn) btn.style.opacity = '1'\n    })\n    bar.addEventListener('mouseleave', () => {\n      const btn = document.getElementById(CLOSE_BTN_ID)\n      if (btn) btn.style.opacity = '0'\n    })\n\n    const target = document.body || document.documentElement\n    if (!target) return\n    target.appendChild(bar)\n  }\n\n  // Update text content while preserving the close button\n  const closeBtn = document.getElementById(CLOSE_BTN_ID)\n  // Set text on bar, then re-append close button so it stays on top\n  bar.textContent = text\n  if (closeBtn) {\n    bar.appendChild(closeBtn)\n  }\n\n  // Register Escape key listener (replace any existing one)\n  if (subtitleEscapeHandler) {\n    document.removeEventListener('keydown', subtitleEscapeHandler)\n  }\n  subtitleEscapeHandler = (e: KeyboardEvent) => {\n    if (e.key === 'Escape') {\n      clearSubtitle()\n    }\n  }\n  document.addEventListener('keydown', subtitleEscapeHandler)\n\n  // Force reflow so the browser registers opacity:0, then set to 1\n  // for the CSS transition. No timer needed \u2014 avoids rAF (paused in\n  // background tabs) and setTimeout (throttled to 1s in background tabs).\n  void bar.offsetHeight\n  bar.style.opacity = '1'\n}\n\n/**\n * Show or hide a recording watermark (Gasoline flame icon) in the bottom-right corner.\n * The icon renders at 64x64px with 50% opacity, captured in the tab video.\n */\nexport function toggleRecordingWatermark(visible: boolean): void {\n  const ELEMENT_ID = 'gasoline-recording-watermark'\n\n  if (!visible) {\n    const existing = document.getElementById(ELEMENT_ID)\n    if (existing) {\n      existing.style.opacity = '0'\n      setTimeout(() => existing.remove(), 300)\n    }\n    return\n  }\n\n  // Don't create a duplicate\n  if (document.getElementById(ELEMENT_ID)) return\n\n  const container = document.createElement('div')\n  container.id = ELEMENT_ID\n  Object.assign(container.style, {\n    position: 'fixed',\n    bottom: '16px',\n    right: '16px',\n    width: '64px',\n    height: '64px',\n    opacity: '0',\n    transition: 'opacity 0.3s ease-in',\n    zIndex: '2147483645',\n    pointerEvents: 'none'\n  })\n\n  const img = document.createElement('img')\n  img.src = chrome.runtime.getURL('icons/icon.svg')\n  Object.assign(img.style, { width: '100%', height: '100%', opacity: '0.5' })\n  container.appendChild(img)\n\n  const target = document.body || document.documentElement\n  if (!target) return\n  target.appendChild(container)\n\n  // Trigger reflow then fade in\n  void container.offsetHeight\n  container.style.opacity = '1'\n}\n", "// runtime-message-listener.ts \u2014 Message routing between background and content contexts.\n\n/**\n * Purpose: Handles content-script message relay between background and inject contexts.\n * Docs: docs/features/feature/interact-explore/index.md\n * Docs: docs/features/feature/query-dom/index.md\n */\n\n/**\n * @fileoverview Runtime Message Listener Module\n * Handles chrome.runtime messages from background script\n */\n\nimport type { ContentMessage, WebSocketCaptureMode } from '../types'\nimport { SettingName } from '../lib/constants'\nimport {\n  isValidBackgroundSender,\n  handlePing,\n  handleToggleMessage,\n  forwardHighlightMessage,\n  handleStateCommand,\n  handleExecuteJs,\n  handleExecuteQuery,\n  handleA11yQuery,\n  handleDomQuery,\n  handleGetNetworkWaterfall,\n  handleLinkHealthQuery,\n  handleComputedStylesQuery,\n  handleFormDiscoveryQuery\n} from './message-handlers'\nimport { showActionToast } from './ui/toast'\nimport { showSubtitle, toggleRecordingWatermark } from './ui/subtitle'\n\n// Toggle state caches \u2014 updated by forwarded setting messages from background\nlet actionToastsEnabled = true\nlet subtitlesEnabled = true\n\n/**\n * Initialize runtime message listener\n * Listens for messages from background (feature toggles and pilot commands)\n */\nexport function initRuntimeMessageListener(): void {\n  // Load overlay toggle states from storage\n  chrome.storage.local.get(\n    ['actionToastsEnabled', 'subtitlesEnabled'],\n    (result: Record<string, boolean | undefined>) => {\n      if (result.actionToastsEnabled !== undefined) actionToastsEnabled = result.actionToastsEnabled\n      if (result.subtitlesEnabled !== undefined) subtitlesEnabled = result.subtitlesEnabled\n    }\n  )\n\n  /** Sync message handlers \u2014 return false (no async response needed) */\n  type SyncMsg = ContentMessage & { enabled?: boolean; mode?: WebSocketCaptureMode; url?: string; params?: unknown }\n  const syncHandlers: Record<string, (msg: SyncMsg) => false | void> = {\n    GASOLINE_PING: () => {\n      /* handled below via sendResponse */\n    },\n    GASOLINE_ACTION_TOAST: (msg) => {\n      if (!actionToastsEnabled) return false\n      const m = msg as {\n        text?: string\n        detail?: string\n        state?: 'trying' | 'success' | 'warning' | 'error'\n        duration_ms?: number\n      }\n      if (m.text) showActionToast(m.text, m.detail, m.state || 'trying', m.duration_ms)\n      return false\n    },\n    GASOLINE_RECORDING_WATERMARK: (msg) => {\n      toggleRecordingWatermark((msg as { visible?: boolean }).visible ?? false)\n      return false\n    },\n    GASOLINE_SUBTITLE: (msg) => {\n      if (!subtitlesEnabled) return false\n      showSubtitle((msg as { text?: string }).text ?? '')\n      return false\n    },\n    [SettingName.ACTION_TOASTS]: (msg) => {\n      actionToastsEnabled = (msg as { enabled: boolean }).enabled\n      return false\n    },\n    [SettingName.SUBTITLES]: (msg) => {\n      subtitlesEnabled = (msg as { enabled: boolean }).enabled\n      return false\n    }\n  }\n\n  /** Delegated handlers \u2014 return boolean | undefined (some are async, returning true) */\n  type DelegatedHandler = (msg: SyncMsg, sendResponse: (r?: unknown) => void) => boolean | undefined\n  const delegatedHandlers: Record<string, DelegatedHandler> = {\n    GASOLINE_DRAW_MODE_START: (msg, sr) => {\n      const m = msg as { started_by?: string; annot_session_name?: string; correlation_id?: string }\n      import(/* webpackIgnore: true */ chrome.runtime.getURL('content/draw-mode.js'))\n        .then((mod) => {\n          const result = mod.activateDrawMode(m.started_by || 'user', m.annot_session_name || '', m.correlation_id || '')\n          sr(result)\n        })\n        .catch((e: Error) => sr({ error: 'draw_mode_load_failed', message: e.message }))\n      return true\n    },\n    GASOLINE_DRAW_MODE_STOP: (_msg, sr) => {\n      import(/* webpackIgnore: true */ chrome.runtime.getURL('content/draw-mode.js'))\n        .then((mod) => {\n          const result = mod.deactivateAndSendResults?.() || mod.deactivateDrawMode?.()\n          sr(result || { status: 'stopped' })\n        })\n        .catch((e: Error) => sr({ error: 'draw_mode_load_failed', message: e.message }))\n      return true\n    },\n    GASOLINE_GET_ANNOTATIONS: (_msg, sr) => {\n      import(/* webpackIgnore: true */ chrome.runtime.getURL('content/draw-mode.js'))\n        .then((mod) => {\n          sr({ draw_mode_active: mod.isDrawModeActive?.() ?? false })\n        })\n        .catch(() => sr({ draw_mode_active: false }))\n      return true\n    },\n    GASOLINE_HIGHLIGHT: (msg, sr) => {\n      forwardHighlightMessage({ params: msg.params as { selector: string; duration_ms?: number } })\n        .then((r) => sr(r))\n        .catch((e: Error) => sr({ success: false, error: e.message }))\n      return true\n    },\n    GASOLINE_MANAGE_STATE: (msg, sr) => {\n      handleStateCommand(msg.params as Record<string, unknown>)\n        .then((r) => sr(r))\n        .catch((e: Error) => sr({ error: e.message }))\n      return true\n    },\n    GASOLINE_EXECUTE_JS: (msg, sr) =>\n      handleExecuteJs((msg.params as { script?: string; timeout_ms?: number }) || {}, sr),\n    GASOLINE_EXECUTE_QUERY: (msg, sr) => handleExecuteQuery((msg.params || {}) as Record<string, unknown>, sr),\n    A11Y_QUERY: (msg, sr) => handleA11yQuery((msg.params || {}) as Record<string, unknown>, sr),\n    DOM_QUERY: (msg, sr) => handleDomQuery((msg.params || {}) as Record<string, unknown>, sr),\n    GET_NETWORK_WATERFALL: (_msg, sr) => handleGetNetworkWaterfall(sr),\n    LINK_HEALTH_QUERY: (msg, sr) => handleLinkHealthQuery((msg.params ?? {}) as Record<string, unknown>, sr),\n    COMPUTED_STYLES_QUERY: (msg, sr) => handleComputedStylesQuery((msg.params ?? {}) as Record<string, unknown>, sr),\n    FORM_DISCOVERY_QUERY: (msg, sr) => handleFormDiscoveryQuery((msg.params ?? {}) as Record<string, unknown>, sr)\n  }\n\n  chrome.runtime.onMessage.addListener(\n    (\n      message: SyncMsg,\n      sender: chrome.runtime.MessageSender,\n      sendResponse: (response?: unknown) => void\n    ): boolean | undefined => {\n      if (!isValidBackgroundSender(sender)) {\n        console.warn('[Gasoline] Rejected message from untrusted sender:', sender.id)\n        return false\n      }\n\n      // Ping is special: sync handler that needs sendResponse\n      if (message.type === 'GASOLINE_PING') return handlePing(sendResponse)\n\n      // Try sync handlers first\n      const syncHandler = syncHandlers[message.type] // nosemgrep: unsafe-dynamic-method\n      if (syncHandler) {\n        syncHandler(message)\n        return false\n      }\n\n      // Handle toggle messages (no dispatch needed, always runs)\n      handleToggleMessage(message)\n\n      // Try delegated handlers\n      const delegated = delegatedHandlers[message.type] // nosemgrep: unsafe-dynamic-method\n      if (delegated) return delegated(message, sendResponse)\n\n      return undefined\n    }\n  )\n}\n", "/**\n * Purpose: Handles content-script message relay between background and inject contexts.\n * Docs: docs/features/feature/interact-explore/index.md\n * Docs: docs/features/feature/query-dom/index.md\n */\n\n/**\n * @fileoverview Favicon Replacer - Visual indicator for tracked tabs\n * Replaces the page's favicon with the Gasoline flame icon when tab tracking is enabled.\n * Adds flickering animation when AI Pilot is active.\n */\n\nimport type { TrackingState } from '../types'\n\n/**\n * Original favicon href (to restore when tracking stops)\n */\nlet originalFaviconHref: string | null = null\n\n/**\n * Interval ID for flicker effect (uses setInterval, not requestAnimationFrame)\n * This ensures animation continues even when tab is hidden (visible in tab bar)\n */\nlet flickerInterval: number | null = null\n\n/**\n * Initialize favicon replacement.\n * Listens for tracking state changes and updates favicon accordingly.\n */\n// #lizard forgives\nexport function initFaviconReplacer(): void {\n  // Listen for tracking state updates from background\n  chrome.runtime.onMessage.addListener((message, sender, _sendResponse) => {\n    // Only accept messages from the extension itself (background script)\n    if (sender.id !== chrome.runtime.id) return false\n    if (message.type === 'trackingStateChanged') {\n      const newState: TrackingState = message.state\n      updateFavicon(newState)\n    }\n    // Explicitly return false so Chrome doesn't prematurely resolve\n    // sendMessage promises from other listeners (e.g. DOM_QUERY, A11Y_QUERY).\n    return false\n  })\n\n  // Request initial tracking state\n  chrome.runtime.sendMessage({ type: 'getTrackingState' }, (response: { state?: TrackingState }) => {\n    if (response && response.state) {\n      updateFavicon(response.state)\n    }\n  })\n}\n\n/**\n * Update favicon based on tracking state.\n * - Not tracked: Shows original favicon\n * - Tracked (AI Pilot off): Shows static glowing flame\n * - Tracked (AI Pilot on): Shows flickering flame\n */\nfunction updateFavicon(state: TrackingState): void {\n  if (!state.isTracked) {\n    // Restore original favicon\n    restoreOriginalFavicon()\n    stopFlicker()\n  } else if (state.aiPilotEnabled) {\n    // Tracked + AI Pilot on = flickering flame\n    replaceFaviconWithFlame(true)\n    startFlicker()\n  } else {\n    // Tracked only = static glowing flame\n    replaceFaviconWithFlame(false)\n    stopFlicker()\n  }\n}\n\n/**\n * Save original favicon and replace with Gasoline flame.\n */\nfunction replaceFaviconWithFlame(withGlow: boolean): void {\n  // Save original favicon (only once)\n  if (!originalFaviconHref) {\n    const existingLink = document.querySelector('link[rel*=\"icon\"]') as HTMLLinkElement | null\n    originalFaviconHref = existingLink?.href || ''\n  }\n\n  // Remove existing favicons\n  const existingIcons = document.querySelectorAll('link[rel*=\"icon\"]')\n  existingIcons.forEach((icon) => icon.remove())\n\n  // Add Gasoline flame favicon\n  const link = document.createElement('link')\n  link.rel = 'icon'\n  link.type = 'image/svg+xml'\n  link.id = 'gasoline-favicon'\n\n  // Use glow icon if tracking, regular icon if not\n  const iconPath = withGlow ? 'icons/icon-glow.svg' : 'icons/icon.svg'\n  link.href = chrome.runtime.getURL(iconPath)\n\n  document.head.appendChild(link)\n}\n\n/**\n * Restore the original page favicon.\n */\nfunction restoreOriginalFavicon(): void {\n  // Remove Gasoline favicon\n  const gasolineIcon = document.getElementById('gasoline-favicon')\n  if (gasolineIcon) {\n    gasolineIcon.remove()\n  }\n\n  // Restore original\n  if (originalFaviconHref) {\n    const link = document.createElement('link')\n    link.rel = 'icon'\n    link.href = originalFaviconHref\n    document.head.appendChild(link)\n  }\n}\n\n/**\n * Start flicker animation (for AI Pilot active state).\n * Realistic 8-frame flame animation:\n * - Bottom stays anchored (flames grow UPWARD, not scaled from center)\n * - Smaller flames = more orange/red (cooler, 85-92% height) + smaller darker ring\n * - Normal flame = orange-yellow gradient (100% height) + medium orange ring\n * - Larger flames = more yellow/white (hotter, 105-112% height) + larger brighter ring\n * - 150ms per frame = 1.2s full cycle (fast, visible flicker)\n * - Uses setInterval (not requestAnimationFrame) so it's visible in tab bar when tab is hidden\n */\nfunction startFlicker(): void {\n  if (flickerInterval !== null) {\n    return // Already flickering\n  }\n\n  // 8-frame sequence for smooth breathing effect with color temperature shift\n  const flameFrames = [\n    'icon-flicker-1-tiny.svg', // 85% - dark red/orange (coolest) + small dark ring\n    'icon-flicker-2-small.svg', // 92% - orange + small orange ring\n    'icon-flicker-3-normal.svg', // 100% - orange-yellow (base) + medium orange ring\n    'icon-flicker-4-medium.svg', // 105% - yellow + medium yellow ring\n    'icon-flicker-5-large.svg', // 112% - yellow/white (PEAK - hottest) + large bright ring\n    'icon-flicker-6-medium.svg', // 105% - yellow + medium yellow ring (shrinking)\n    'icon-flicker-7-smallmed.svg', // 96% - orange-yellow + medium ring\n    'icon-flicker-8-small.svg' // 92% - orange + small orange ring (back to small)\n  ] as const\n\n  let currentFrameIndex = 0\n\n  // Use setInterval instead of requestAnimationFrame so animation continues\n  // even when tab is hidden (user can see flicker in browser tab bar)\n  flickerInterval = window.setInterval(() => {\n    currentFrameIndex = (currentFrameIndex + 1) % flameFrames.length\n\n    // Update favicon\n    const gasolineIcon = document.getElementById('gasoline-favicon') as HTMLLinkElement | null\n    if (gasolineIcon) {\n      const iconPath = `icons/${flameFrames[currentFrameIndex]}`\n      gasolineIcon.href = chrome.runtime.getURL(iconPath)\n    }\n  }, 150) // 150ms per frame = 1.2s full cycle (browser-limited, but visible)\n}\n\n/**\n * Stop flicker animation.\n */\nfunction stopFlicker(): void {\n  if (flickerInterval !== null) {\n    clearInterval(flickerInterval)\n    flickerInterval = null\n  }\n}\n", "/**\n * Purpose: Owns content.ts runtime behavior and integration logic.\n * Docs: docs/features/feature/interact-explore/index.md\n * Docs: docs/features/feature/analyze-tool/index.md\n */\n\n/**\n * @fileoverview content.ts - Message bridge between page and extension contexts.\n * Injects inject.js into the page as a module script, then listens for\n * window.postMessage events (GASOLINE_LOG, GASOLINE_WS, GASOLINE_NETWORK_BODY,\n * GASOLINE_ENHANCED_ACTION, GASOLINE_PERF_SNAPSHOT) and forwards them to the\n * background service worker via chrome.runtime.sendMessage.\n * Also handles chrome.runtime messages for on-demand queries (DOM, a11y, perf).\n * Design: Tab-scoped filtering - only forwards messages from the explicitly\n * tracked tab. Validates message origin (event.source === window) to prevent\n * cross-frame injection. Attaches tabId to all forwarded messages.\n */\n\nimport { initTabTracking } from './content/tab-tracking'\nimport { initScriptInjection } from './content/script-injection'\nimport {\n  initRequestTracking,\n  getPendingRequestStats,\n  clearPendingRequests,\n  cleanupRequestTracking\n} from './content/request-tracking'\nimport { initWindowMessageListener } from './content/window-message-listener'\nimport { initRuntimeMessageListener } from './content/runtime-message-listener'\nimport { initFaviconReplacer } from './content/favicon-replacer'\n\n// Export for testing\nexport { getPendingRequestStats, clearPendingRequests, cleanupRequestTracking }\n\n// ============================================================================\n// INITIALIZATION\n// ============================================================================\n\n// Track whether scripts have been injected\nlet scriptsInjected = false\n\n// Initialize tab tracking first, with callback for injection\ninitTabTracking((tracked) => {\n  if (tracked && !scriptsInjected) {\n    initScriptInjection()\n    scriptsInjected = true\n  }\n})\n\n// Initialize request tracking (cleanup handlers)\ninitRequestTracking()\n\n// Initialize window message listener\ninitWindowMessageListener()\n\n// Initialize runtime message listener\ninitRuntimeMessageListener()\n\n// Initialize favicon replacer (visual indicator for tracked tabs)\ninitFaviconReplacer()\n"],
  "mappings": "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",
  "names": ["closeBtn"]
}
