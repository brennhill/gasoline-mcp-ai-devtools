<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gasoline Flame Visual Demo</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #0d1117;
      color: #e0e0e0;
      padding: 40px;
      margin: 0;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    h1 {
      color: #fb923c;
      margin-bottom: 40px;
    }

    .demo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 30px;
      margin-bottom: 40px;
    }

    .demo-card {
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 12px;
      padding: 30px;
      text-align: center;
    }

    .demo-card h2 {
      font-size: 18px;
      margin-top: 0;
      margin-bottom: 20px;
      color: #58a6ff;
    }

    .demo-card p {
      font-size: 14px;
      color: #8b949e;
      margin-bottom: 20px;
      line-height: 1.5;
    }

    .icon-display {
      display: inline-block;
      width: 128px;
      height: 128px;
      margin: 20px auto;
    }

    .icon-display img {
      width: 100%;
      height: 100%;
    }

    .state-label {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 6px;
      font-size: 12px;
      font-weight: 600;
      margin-top: 10px;
    }

    .state-inactive {
      background: rgba(110, 118, 129, 0.2);
      color: #6e7681;
    }

    .state-tracking {
      background: rgba(63, 185, 80, 0.2);
      color: #3fb950;
    }

    .state-pilot {
      background: rgba(251, 146, 60, 0.2);
      color: #fb923c;
    }

    #flickerIcon {
      animation: flicker 1.6s infinite;
    }

    @keyframes flicker {
      0%, 100% {
        filter: drop-shadow(0 0 8px rgba(251, 146, 60, 0.8));
        opacity: 1;
      }
      50% {
        filter: drop-shadow(0 0 4px rgba(251, 146, 60, 0.4));
        opacity: 0.8;
      }
    }

    .tab-demo {
      background: #1a1a1a;
      border: 1px solid #30363d;
      border-radius: 8px;
      padding: 20px;
      margin-top: 40px;
    }

    .tab-demo h2 {
      margin-top: 0;
      color: #58a6ff;
    }

    .browser-tab {
      background: #2d333b;
      border: 1px solid #444c56;
      border-radius: 8px 8px 0 0;
      padding: 10px 16px;
      display: inline-flex;
      align-items: center;
      gap: 10px;
      margin-right: 8px;
      margin-bottom: -1px;
    }

    .favicon {
      width: 16px;
      height: 16px;
    }

    .tab-title {
      font-size: 13px;
      color: #e0e0e0;
    }

    .browser-content {
      background: #0d1117;
      border: 1px solid #444c56;
      padding: 20px;
      min-height: 100px;
      border-radius: 0 8px 8px 8px;
    }

    code {
      background: #2d333b;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: ui-monospace, monospace;
      font-size: 12px;
      color: #fb923c;
    }

    .legend {
      margin-top: 40px;
      padding: 20px;
      background: #161b22;
      border: 1px solid #30363d;
      border-radius: 8px;
    }

    .legend h3 {
      margin-top: 0;
      color: #58a6ff;
    }

    .legend ul {
      list-style: none;
      padding: 0;
    }

    .legend li {
      padding: 8px 0;
      color: #8b949e;
    }

    .legend li strong {
      color: #e0e0e0;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ðŸ”¥ Gasoline Flame Icon Visual States</h1>

    <div class="demo-grid">
      <!-- State 1: No tracking -->
      <div class="demo-card">
        <h2>Not Tracking</h2>
        <p>Default state when no tab is being tracked. Original flame icon, no effects.</p>
        <div class="icon-display">
          <img src="extension/icons/icon.svg" alt="Normal flame">
        </div>
        <div class="state-label state-inactive">INACTIVE</div>
      </div>

      <!-- State 2: Tracking only -->
      <div class="demo-card">
        <h2>Tab Tracking Active</h2>
        <p>Static glowing flame when a tab is being tracked. Subtle glow effect, no animation.</p>
        <div class="icon-display">
          <img src="extension/icons/icon-glow.svg" alt="Glowing flame">
        </div>
        <div class="state-label state-tracking">TRACKING</div>
      </div>

      <!-- State 3: Tracking + AI Pilot -->
      <div class="demo-card">
        <h2>AI Pilot Active</h2>
        <p>Fast flickering flame! 8 frames at 150ms = 1.2s cycle. Ring pulses WITH flame. Color shifts from red â†’ orange â†’ yellow â†’ white.</p>
        <div class="icon-display">
          <img id="flickerIcon" src="extension/icons/icon-glow.svg" alt="Flickering flame">
        </div>
        <div class="state-label state-pilot">AI PILOT ON</div>
        <p style="font-size: 11px; color: #6e7681; margin-top: 10px;">
          Watch the flame grow and shrink like a real fire ðŸ”¥
        </p>
      </div>
    </div>

    <h2 style="margin-top: 50px; color: #58a6ff;">8-Frame Flicker Sequence (150ms per frame = 1.2s cycle)</h2>
    <p style="color: #8b949e; margin-bottom: 20px;">
      Bottom anchored. Flame grows UPWARD. Glow ring pulses WITH flame. Colors shift from dark red â†’ orange â†’ yellow â†’ white (peak) â†’ back.
    </p>
    <div class="demo-grid" style="margin-top: 20px; grid-template-columns: repeat(4, 1fr);">
      <div class="demo-card" style="padding: 15px;">
        <h2 style="font-size: 14px;">Frame 1: Tiny</h2>
        <p style="font-size: 12px;">85% height, dark red, r=61</p>
        <div class="icon-display" style="width: 64px; height: 64px;">
          <img src="extension/icons/icon-flicker-1-tiny.svg" alt="Frame 1">
        </div>
      </div>

      <div class="demo-card" style="padding: 15px;">
        <h2 style="font-size: 14px;">Frame 2: Small</h2>
        <p style="font-size: 12px;">92% height, orange, r=62</p>
        <div class="icon-display" style="width: 64px; height: 64px;">
          <img src="extension/icons/icon-flicker-2-small.svg" alt="Frame 2">
        </div>
      </div>

      <div class="demo-card" style="padding: 15px;">
        <h2 style="font-size: 14px;">Frame 3: Normal</h2>
        <p style="font-size: 12px;">100% height, yellow, r=63</p>
        <div class="icon-display" style="width: 64px; height: 64px;">
          <img src="extension/icons/icon-flicker-3-normal.svg" alt="Frame 3">
        </div>
      </div>

      <div class="demo-card" style="padding: 15px;">
        <h2 style="font-size: 14px;">Frame 4: Medium</h2>
        <p style="font-size: 12px;">105% height, yellow</p>
        <div class="icon-display" style="width: 64px; height: 64px;">
          <img src="extension/icons/icon-flicker-4-medium.svg" alt="Frame 4">
        </div>
      </div>

      <div class="demo-card" style="padding: 15px;">
        <h2 style="font-size: 14px;">Frame 5: PEAK ðŸ”¥</h2>
        <p style="font-size: 12px;">112% height, white, r=67 (HOTTEST)</p>
        <div class="icon-display" style="width: 64px; height: 64px;">
          <img src="extension/icons/icon-flicker-5-large.svg" alt="Frame 5">
        </div>
      </div>

      <div class="demo-card" style="padding: 15px;">
        <h2 style="font-size: 14px;">Frame 6: Medium</h2>
        <p style="font-size: 12px;">105% height, yellow</p>
        <div class="icon-display" style="width: 64px; height: 64px;">
          <img src="extension/icons/icon-flicker-6-medium.svg" alt="Frame 6">
        </div>
      </div>

      <div class="demo-card" style="padding: 15px;">
        <h2 style="font-size: 14px;">Frame 7: Small-Med</h2>
        <p style="font-size: 12px;">96% height, yellow</p>
        <div class="icon-display" style="width: 64px; height: 64px;">
          <img src="extension/icons/icon-flicker-7-smallmed.svg" alt="Frame 7">
        </div>
      </div>

      <div class="demo-card" style="padding: 15px;">
        <h2 style="font-size: 14px;">Frame 8: Small</h2>
        <p style="font-size: 12px;">92% height, orange</p>
        <div class="icon-display" style="width: 64px; height: 64px;">
          <img src="extension/icons/icon-flicker-8-small.svg" alt="Frame 8">
        </div>
      </div>
    </div>

    <div class="tab-demo">
      <h2>Browser Tab Favicon Replacement</h2>
      <p style="color: #8b949e; margin-bottom: 20px;">
        When tracking is active, the page's favicon is replaced with the Gasoline flame:
      </p>

      <div>
        <div class="browser-tab">
          <img class="favicon" src="extension/icons/icon-glow.svg" alt="Gasoline favicon">
          <span class="tab-title">example.com - Being tracked</span>
        </div>
      </div>
      <div class="browser-content">
        <p style="color: #8b949e; margin: 0;">
          Page content goes here... (the flame icon appears in the browser tab instead of the site's favicon)
        </p>
      </div>
    </div>

    <div class="legend">
      <h3>Visual Behavior</h3>
      <ul>
        <li><strong>Normal:</strong> Original orange/yellow flame gradient, no effects</li>
        <li><strong>Glow Ring:</strong> CHANGES with flame size! Small flames = small dark ring, large flames = large bright ring</li>
        <li><strong>Flicker:</strong> 8-frame sequence at 150ms per frame = 1.2s full cycle (fast, noticeable)</li>
        <li><strong>Anchored Growth:</strong> Bottom stays fixed at y=116, flame grows UPWARD (not scaled from center)</li>
        <li><strong>Size Range:</strong> 85% (tiny) â†’ 92% â†’ 100% â†’ 105% â†’ 112% (PEAK) â†’ 105% â†’ 96% â†’ 92% â†’ loop</li>
        <li><strong>Ring Range:</strong> r=61 (tiny, dark red) â†’ r=62 (orange) â†’ r=63 â†’ r=65 (yellow) â†’ r=67 (white, PEAK) â†’ shrinks back</li>
        <li><strong>Color Shift:</strong> Dark red/orange (cool, 85%) â†’ Yellow (hot, 100%) â†’ White (hottest, 112%) + ring matches</li>
        <li><strong>Favicon:</strong> Injected via content script, replaces site's favicon only when tracking</li>
        <li><strong>Visible When Hidden:</strong> Uses setInterval (not requestAnimationFrame) so flicker visible in tab bar</li>
      </ul>
    </div>

    <div class="legend" style="margin-top: 20px;">
      <h3>Technical Implementation</h3>
      <ul>
        <li><strong>Icons:</strong> 8 SVG frames (icon-flicker-1-tiny.svg through icon-flicker-8-small.svg)</li>
        <li><strong>Transform:</strong> Each frame uses <code>translate(64, 116) scale(1, Y) translate(-64, -116)</code> to anchor bottom</li>
        <li><strong>Content Script:</strong> <code>favicon-replacer.ts</code> handles replacement and animation loop</li>
        <li><strong>State Sync:</strong> Background broadcasts tracking + AI Pilot state via <code>chrome.runtime.sendMessage</code></li>
        <li><strong>Animation:</strong> <code>setInterval</code> at 150ms per frame (1.2s full cycle) - continues when tab hidden!</li>
        <li><strong>Performance:</strong> 8 static SVGs (~5KB each = 40KB), negligible CPU. Runs in background tabs</li>
        <li><strong>Realistic Effect:</strong> Upward growth + color temperature + dynamic ring = real flame physics</li>
        <li><strong>Dynamic Glow:</strong> Ring size (r=61 to r=67) and color (dark red to bright white) match flame</li>
      </ul>
    </div>
  </div>

  <script>
    // Simulate the realistic 8-frame flame flicker
    const flickerIcon = document.getElementById('flickerIcon');
    const flameFrames = [
      'extension/icons/icon-flicker-1-tiny.svg',     // 85% - orange (coolest)
      'extension/icons/icon-flicker-2-small.svg',    // 92% - orange
      'extension/icons/icon-flicker-3-normal.svg',   // 100% - orange-yellow
      'extension/icons/icon-flicker-4-medium.svg',   // 105% - yellow
      'extension/icons/icon-flicker-5-large.svg',    // 112% - yellow/white (PEAK - hottest)
      'extension/icons/icon-flicker-6-medium.svg',   // 105% - yellow (shrinking)
      'extension/icons/icon-flicker-7-smallmed.svg', // 96% - orange-yellow
      'extension/icons/icon-flicker-8-small.svg',    // 92% - orange
    ];
    let currentFrameIndex = 0;

    setInterval(() => {
      currentFrameIndex = (currentFrameIndex + 1) % flameFrames.length;
      flickerIcon.src = flameFrames[currentFrameIndex];
    }, 75); // 75ms per frame = 0.6s full cycle (VERY FAST!)
  </script>
</body>
</html>
