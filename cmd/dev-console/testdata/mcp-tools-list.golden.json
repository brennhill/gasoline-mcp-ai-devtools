[
  {
    "name": "observe",
    "description": "Read captured browser state from extension buffers.\n\nnetwork_bodies captures fetch() only; use network_waterfall for all requests. extension_logs = internal debug logs (use logs for console). error_bundles = pre-assembled debug context per error. Use body_key/body_path to extract JSON subtrees from network_bodies.\n\nPagination: pass after_cursor/before_cursor/since_cursor from response metadata. restart_on_eviction=true if cursor expired.",
    "inputSchema": {
      "properties": {
        "after_cursor": {
          "description": "Backward pagination cursor from response metadata",
          "type": "string"
        },
        "before_cursor": {
          "description": "Forward pagination cursor",
          "type": "string"
        },
        "body_key": {
          "description": "Extract values for a JSON key from response_body (network_bodies)",
          "type": "string"
        },
        "body_path": {
          "description": "Extract JSON value from response_body using path, e.g. data.items[0].id (network_bodies)",
          "type": "string"
        },
        "connection_id": {
          "description": "WebSocket connection ID filter",
          "type": "string"
        },
        "correlation_id": {
          "description": "Async command correlation ID",
          "type": "string"
        },
        "database": {
          "description": "IndexedDB database name (indexeddb)",
          "type": "string"
        },
        "direction": {
          "enum": [
            "incoming",
            "outgoing"
          ],
          "type": "string"
        },
        "format": {
          "description": "Screenshot format (screenshot)",
          "enum": [
            "png",
            "jpeg"
          ],
          "type": "string"
        },
        "full_page": {
          "description": "Capture full scrollable page (screenshot)",
          "type": "boolean"
        },
        "include": {
          "description": "Categories to include (timeline)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "last_n": {
          "description": "Return last N items only",
          "type": "number"
        },
        "level": {
          "description": "Exact log level filter (logs)",
          "enum": [
            "debug",
            "log",
            "info",
            "warn",
            "error"
          ],
          "type": "string"
        },
        "limit": {
          "description": "Max entries to return (default 100, max 1000)",
          "type": "number"
        },
        "method": {
          "description": "HTTP method filter",
          "type": "string"
        },
        "min_group_size": {
          "description": "Minimum occurrences to form a group (summarized_logs, default 2)",
          "type": "number"
        },
        "min_level": {
          "description": "Min log level (logs)",
          "enum": [
            "debug",
            "log",
            "info",
            "warn",
            "error"
          ],
          "type": "string"
        },
        "original_id": {
          "description": "Original recording ID (log_diff_report)",
          "type": "string"
        },
        "quality": {
          "description": "Screenshot JPEG quality 1-100 (screenshot)",
          "type": "number"
        },
        "recording_id": {
          "description": "Recording ID (recording_actions, playback_results)",
          "type": "string"
        },
        "replay_id": {
          "description": "Replay recording ID (log_diff_report)",
          "type": "string"
        },
        "restart_on_eviction": {
          "description": "Auto-restart if cursor expired",
          "type": "boolean"
        },
        "scope": {
          "description": "Filter scope: current_page (default) filters by tracked tab, all returns everything (errors, logs)",
          "enum": [
            "current_page",
            "all"
          ],
          "type": "string"
        },
        "selector": {
          "description": "Capture specific element by CSS selector (screenshot)",
          "type": "string"
        },
        "since_cursor": {
          "description": "Return all entries newer than cursor (no limit)",
          "type": "string"
        },
        "source": {
          "description": "Exact source filter (logs)",
          "type": "string"
        },
        "status_max": {
          "description": "Max HTTP status code",
          "type": "number"
        },
        "status_min": {
          "description": "Min HTTP status code",
          "type": "number"
        },
        "store": {
          "description": "IndexedDB object store name (indexeddb)",
          "type": "string"
        },
        "telemetry_mode": {
          "description": "Telemetry metadata mode for this call: off, auto, full",
          "enum": [
            "off",
            "auto",
            "full"
          ],
          "type": "string"
        },
        "url": {
          "description": "Filter by URL substring",
          "type": "string"
        },
        "wait_for_stable": {
          "description": "Wait for layout to stabilize before capture (screenshot)",
          "type": "boolean"
        },
        "what": {
          "enum": [
            "errors",
            "logs",
            "extension_logs",
            "network_waterfall",
            "network_bodies",
            "websocket_events",
            "websocket_status",
            "actions",
            "vitals",
            "page",
            "tabs",
            "pilot",
            "timeline",
            "error_bundles",
            "screenshot",
            "storage",
            "indexeddb",
            "command_result",
            "pending_commands",
            "failed_commands",
            "saved_videos",
            "recordings",
            "recording_actions",
            "playback_results",
            "log_diff_report",
            "summarized_logs"
          ],
          "type": "string"
        },
        "window_seconds": {
          "description": "error_bundles lookback seconds (default 3, max 10)",
          "type": "number"
        }
      },
      "required": [
        "what"
      ],
      "type": "object"
    }
  },
  {
    "name": "analyze",
    "description": "Trigger active analysis. Creates async queries the extension executes.\n\nSynchronous Mode (Default): Tools now block until the extension returns a result (up to 15s). Set background:true to return immediately with a correlation_id.\n\nDraw Mode: Use annotations to get all annotations from the last draw mode session. Use annotation_detail with correlation_id to get full computed styles and DOM detail for a specific annotation.",
    "inputSchema": {
      "properties": {
        "annot_session": {
          "description": "Named session for multi-page annotation review (applies to annotations). Accumulates annotations across pages.",
          "type": "string"
        },
        "background": {
          "description": "Run in background and return a correlation_id immediately.",
          "type": "boolean"
        },
        "baseline": {
          "description": "Baseline name to compare against (visual_diff)",
          "type": "string"
        },
        "checks": {
          "description": "Checks to run (security_audit)",
          "items": {
            "enum": [
              "credentials",
              "pii",
              "headers",
              "cookies",
              "transport",
              "auth"
            ],
            "type": "string"
          },
          "type": "array"
        },
        "correlation_id": {
          "description": "Correlation ID for fetching annotation detail (applies to annotation_detail)",
          "type": "string"
        },
        "custom_lists": {
          "description": "Custom domain allow/block lists (third_party_audit)",
          "type": "object"
        },
        "domain": {
          "description": "Domain to check (link_health)",
          "type": "string"
        },
        "file": {
          "description": "Session filename from draw_history results (draw_session)",
          "type": "string"
        },
        "first_party_origins": {
          "description": "First-party origins (third_party_audit)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "force_refresh": {
          "description": "Bypass cache (accessibility)",
          "type": "boolean"
        },
        "frame": {
          "description": "Target iframe: CSS selector, 0-based index, or \"all\" (dom, accessibility)",
          "type": "string"
        },
        "ignore_endpoints": {
          "description": "URL substrings to exclude (api_validation)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "include_static": {
          "description": "Include static-only origins (third_party_audit)",
          "type": "boolean"
        },
        "max_workers": {
          "description": "Max concurrent workers (link_health)",
          "type": "number"
        },
        "name": {
          "description": "Baseline name (visual_baseline, visual_diff)",
          "type": "string"
        },
        "operation": {
          "description": "API validation operation",
          "enum": [
            "analyze",
            "report",
            "clear"
          ],
          "type": "string"
        },
        "scope": {
          "description": "CSS selector scope (accessibility)",
          "type": "string"
        },
        "selector": {
          "description": "CSS selector (dom, accessibility, computed_styles, forms)",
          "type": "string"
        },
        "severity_min": {
          "description": "Min severity (security_audit)",
          "enum": [
            "critical",
            "high",
            "medium",
            "low",
            "info"
          ],
          "type": "string"
        },
        "sync": {
          "description": "Wait for result (default: true).",
          "type": "boolean"
        },
        "tab_id": {
          "description": "Target tab ID (dom, page_summary)",
          "type": "number"
        },
        "tags": {
          "description": "WCAG tags (accessibility)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "telemetry_mode": {
          "description": "Telemetry metadata mode for this call: off, auto, full",
          "enum": [
            "off",
            "auto",
            "full"
          ],
          "type": "string"
        },
        "threshold": {
          "description": "Pixel diff threshold 0-255 (visual_diff, default 30)",
          "type": "number"
        },
        "timeout_ms": {
          "description": "Timeout ms (link_health, page_summary, annotations). For annotations with wait=true: default 300000 (5 min), max 600000 (10 min).",
          "type": "number"
        },
        "urls": {
          "description": "URLs to validate (link_validation)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "wait": {
          "description": "Wait for result (default: true). For annotations: blocks up to 5 min for user to finish drawing.",
          "type": "boolean"
        },
        "what": {
          "enum": [
            "dom",
            "performance",
            "accessibility",
            "error_clusters",
            "history",
            "security_audit",
            "third_party_audit",
            "link_health",
            "link_validation",
            "page_summary",
            "annotations",
            "annotation_detail",
            "api_validation",
            "draw_history",
            "draw_session",
            "computed_styles",
            "forms",
            "form_validation",
            "visual_baseline",
            "visual_diff",
            "visual_baselines"
          ],
          "type": "string"
        },
        "world": {
          "description": "Execution world for page_summary script",
          "enum": [
            "auto",
            "main",
            "isolated"
          ],
          "type": "string"
        }
      },
      "required": [
        "what"
      ],
      "type": "object"
    }
  },
  {
    "name": "generate",
    "description": "Generate artifacts from captured data: reproduction (bug script), csp (Content Security Policy), sarif (accessibility report). Test generation: test_from_context, test_heal, test_classify. Annotation formats: visual_test, annotation_report, annotation_issues.",
    "inputSchema": {
      "properties": {
        "action": {
          "description": "Action type (test_heal: analyze/repair/batch, test_classify: failure/batch)",
          "type": "string"
        },
        "annot_session": {
          "description": "Named annotation session (applies to visual_test, annotation_report, annotation_issues)",
          "type": "string"
        },
        "assert_network": {
          "description": "Assert network responses (test)",
          "type": "boolean"
        },
        "assert_no_errors": {
          "description": "Assert no console errors (test)",
          "type": "boolean"
        },
        "assert_response_shape": {
          "description": "Assert response shape (test)",
          "type": "boolean"
        },
        "auto_apply": {
          "description": "Auto-apply high-confidence fixes (test_heal repair)",
          "type": "boolean"
        },
        "base_url": {
          "description": "Replace origin in URLs",
          "type": "string"
        },
        "broken_selectors": {
          "description": "Broken selectors (test_heal repair)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "context": {
          "description": "Test context (test_from_context)",
          "enum": [
            "error",
            "interaction",
            "regression"
          ],
          "type": "string"
        },
        "error_id": {
          "description": "Specific error ID (test_from_context error)",
          "type": "string"
        },
        "error_message": {
          "description": "Error context (reproduction)",
          "type": "string"
        },
        "exclude_origins": {
          "description": "Origins to exclude (csp)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "failure": {
          "description": "Single test failure (test_classify failure)",
          "properties": {
            "duration_ms": {
              "description": "Test duration in milliseconds",
              "type": "number"
            },
            "error": {
              "description": "Error message",
              "type": "string"
            },
            "screenshot": {
              "description": "Base64-encoded screenshot (optional)",
              "type": "string"
            },
            "test_name": {
              "description": "Name of the failing test",
              "type": "string"
            },
            "trace": {
              "description": "Stack trace",
              "type": "string"
            }
          },
          "required": [
            "error"
          ],
          "type": "object"
        },
        "failures": {
          "description": "Multiple test failures (test_classify batch)",
          "items": {
            "properties": {
              "duration_ms": {
                "description": "Test duration in milliseconds",
                "type": "number"
              },
              "error": {
                "description": "Error message",
                "type": "string"
              },
              "screenshot": {
                "description": "Base64-encoded screenshot (optional)",
                "type": "string"
              },
              "test_name": {
                "description": "Name of the failing test",
                "type": "string"
              },
              "trace": {
                "description": "Stack trace",
                "type": "string"
              }
            },
            "required": [
              "error"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "format": {
          "description": "Deprecated alias for 'what'",
          "enum": [
            "reproduction",
            "test",
            "pr_summary",
            "har",
            "csp",
            "sri",
            "sarif",
            "visual_test",
            "annotation_report",
            "annotation_issues",
            "test_from_context",
            "test_heal",
            "test_classify"
          ],
          "type": "string"
        },
        "generate_fixtures": {
          "description": "Generate network fixtures (reproduction)",
          "type": "boolean"
        },
        "include_mocks": {
          "description": "Include network mocks (test_from_context)",
          "type": "boolean"
        },
        "include_passes": {
          "description": "Include passing rules (sarif)",
          "type": "boolean"
        },
        "include_report_uri": {
          "description": "Include report-uri (csp)",
          "type": "boolean"
        },
        "include_screenshots": {
          "description": "Add screenshot calls (reproduction)",
          "type": "boolean"
        },
        "last_n": {
          "description": "Use last N actions (reproduction)",
          "type": "number"
        },
        "method": {
          "description": "HTTP method filter (har)",
          "type": "string"
        },
        "mode": {
          "enum": [
            "strict",
            "moderate",
            "report_only"
          ],
          "type": "string"
        },
        "origins": {
          "description": "Filter origins (sri)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "output_format": {
          "description": "Output format: file or inline (test_from_context)",
          "type": "string"
        },
        "resource_types": {
          "description": "Resource types: script, stylesheet (sri)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "save_to": {
          "description": "File path to save output",
          "type": "string"
        },
        "scope": {
          "description": "CSS selector scope (sarif)",
          "type": "string"
        },
        "status_max": {
          "description": "Max status code (har)",
          "type": "number"
        },
        "status_min": {
          "description": "Min status code (har)",
          "type": "number"
        },
        "telemetry_mode": {
          "description": "Telemetry metadata mode for this call: off, auto, full",
          "enum": [
            "off",
            "auto",
            "full"
          ],
          "type": "string"
        },
        "test_dir": {
          "description": "Test directory (test_heal batch)",
          "type": "string"
        },
        "test_file": {
          "description": "Test file path (test_heal analyze)",
          "type": "string"
        },
        "test_name": {
          "description": "Test name (test, visual_test)",
          "type": "string"
        },
        "url": {
          "description": "URL filter (har)",
          "type": "string"
        },
        "visual_assertions": {
          "description": "Add visual assertions (reproduction)",
          "type": "boolean"
        },
        "what": {
          "enum": [
            "reproduction",
            "test",
            "pr_summary",
            "har",
            "csp",
            "sri",
            "sarif",
            "visual_test",
            "annotation_report",
            "annotation_issues",
            "test_from_context",
            "test_heal",
            "test_classify"
          ],
          "type": "string"
        }
      },
      "required": [
        "what"
      ],
      "type": "object"
    }
  },
  {
    "name": "configure",
    "description": "Session settings and utilities.\n\nKey actions: health (check server/extension status), clear (reset buffers), noise_rule (suppress recurring console noise), store/load (persist/retrieve session data), tutorial/examples (quick snippets + context-aware guidance), streaming (enable push notifications), recording_start/recording_stop (capture browser sessions), playback (replay recordings), log_diff (compare error states), restart (force-restart daemon when unresponsive).\n\nMacro sequences: save_sequence/replay_sequence/get_sequence/list_sequences/delete_sequence — save named interact action sequences and replay them in a single call.",
    "inputSchema": {
      "properties": {
        "action": {
          "description": "Deprecated alias for 'what'",
          "enum": [
            "store",
            "load",
            "noise_rule",
            "clear",
            "health",
            "tutorial",
            "examples",
            "streaming",
            "test_boundary_start",
            "test_boundary_end",
            "recording_start",
            "recording_stop",
            "playback",
            "log_diff",
            "telemetry",
            "describe_capabilities",
            "diff_sessions",
            "audit_log",
            "restart",
            "save_sequence",
            "get_sequence",
            "list_sequences",
            "delete_sequence",
            "replay_sequence",
            "doctor"
          ],
          "type": "string"
        },
        "audit_session_id": {
          "description": "Filter by audit session ID",
          "type": "string"
        },
        "buffer": {
          "enum": [
            "network",
            "websocket",
            "actions",
            "logs",
            "all"
          ],
          "type": "string"
        },
        "category": {
          "default": "console",
          "description": "Noise category (default: console for flattened add)",
          "enum": [
            "console",
            "network",
            "websocket"
          ],
          "type": "string"
        },
        "classification": {
          "description": "Single-rule flattening helper for noise_action=add",
          "type": "string"
        },
        "compare_a": {
          "description": "First snapshot to compare",
          "type": "string"
        },
        "compare_b": {
          "description": "Second snapshot to compare",
          "type": "string"
        },
        "continue_on_error": {
          "description": "Continue replay if a step fails (default true)",
          "type": "boolean"
        },
        "data": {
          "description": "JSON data to persist",
          "type": "object"
        },
        "description": {
          "description": "Human-readable description for saved sequence",
          "type": "string"
        },
        "events": {
          "description": "Event categories to stream",
          "items": {
            "enum": [
              "errors",
              "network_errors",
              "performance",
              "user_frustration",
              "security",
              "regression",
              "anomaly",
              "ci",
              "all"
            ],
            "type": "string"
          },
          "type": "array"
        },
        "key": {
          "description": "Storage key",
          "type": "string"
        },
        "label": {
          "description": "Test boundary label",
          "type": "string"
        },
        "level": {
          "description": "Single-rule flattening helper for noise_action=add",
          "type": "string"
        },
        "limit": {
          "description": "Max entries to return (default 100, max 1000)",
          "type": "number"
        },
        "message_regex": {
          "description": "Single-rule flattening helper for noise_action=add",
          "type": "string"
        },
        "method": {
          "description": "Single-rule flattening helper for noise_action=add",
          "type": "string"
        },
        "name": {
          "description": "Snapshot name, or sequence name for save_sequence/get_sequence/delete_sequence/replay_sequence",
          "type": "string"
        },
        "namespace": {
          "default": "session",
          "description": "Store grouping (default: session)",
          "type": "string"
        },
        "noise_action": {
          "default": "list",
          "description": "Noise operation (default: list)",
          "enum": [
            "add",
            "remove",
            "list",
            "reset",
            "auto_detect"
          ],
          "type": "string"
        },
        "operation": {
          "description": "Action-specific operation key",
          "enum": [
            "analyze",
            "report",
            "clear"
          ],
          "type": "string"
        },
        "original_id": {
          "description": "Original recording ID (log_diff)",
          "type": "string"
        },
        "override_steps": {
          "description": "Sparse array of step overrides for replay (null = use saved)",
          "items": {},
          "type": "array"
        },
        "pattern": {
          "description": "Regex pattern (single-rule flattening helper for noise_action=add)",
          "type": "string"
        },
        "reason": {
          "description": "Why this is noise",
          "type": "string"
        },
        "recording_id": {
          "description": "Recording ID (recording_stop, playback)",
          "type": "string"
        },
        "replay_id": {
          "description": "Replay recording ID (log_diff)",
          "type": "string"
        },
        "rule_id": {
          "description": "Rule ID to remove",
          "type": "string"
        },
        "rules": {
          "description": "Noise rules to add",
          "items": {
            "type": "object"
          },
          "type": "array"
        },
        "sensitive_data_enabled": {
          "description": "Include sensitive data in recording capture",
          "type": "boolean"
        },
        "severity_min": {
          "enum": [
            "info",
            "warning",
            "error"
          ],
          "type": "string"
        },
        "since": {
          "description": "Entries after ISO 8601 timestamp",
          "type": "string"
        },
        "source_regex": {
          "description": "Single-rule flattening helper for noise_action=add",
          "type": "string"
        },
        "status_max": {
          "description": "Single-rule flattening helper for noise_action=add",
          "type": "integer"
        },
        "status_min": {
          "description": "Single-rule flattening helper for noise_action=add",
          "type": "integer"
        },
        "step_timeout_ms": {
          "description": "Timeout per step during replay (default 10000)",
          "type": "number"
        },
        "steps": {
          "description": "Ordered list of interact action objects (save_sequence, replay_sequence override)",
          "items": {
            "type": "object"
          },
          "type": "array"
        },
        "stop_after_step": {
          "description": "Stop replay after executing this many steps",
          "type": "number"
        },
        "store_action": {
          "default": "list",
          "description": "Store operation (default: list)",
          "enum": [
            "save",
            "load",
            "list",
            "delete",
            "stats"
          ],
          "type": "string"
        },
        "streaming_action": {
          "enum": [
            "enable",
            "disable",
            "status"
          ],
          "type": "string"
        },
        "tab_id": {
          "description": "Target tab ID",
          "type": "number"
        },
        "tags": {
          "description": "Labels for sequence categorization",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "telemetry_mode": {
          "description": "Telemetry metadata mode: off, auto, full. configure(action='telemetry') sets global default. Any tools/call may override per request with telemetry_mode.",
          "enum": [
            "off",
            "auto",
            "full"
          ],
          "type": "string"
        },
        "test_id": {
          "description": "Test boundary ID",
          "type": "string"
        },
        "throttle_seconds": {
          "description": "Min seconds between notifications",
          "maximum": 60,
          "minimum": 1,
          "type": "integer"
        },
        "tool_name": {
          "description": "Filter by tool name",
          "type": "string"
        },
        "url": {
          "description": "URL filter for snapshot capture (diff_sessions)",
          "type": "string"
        },
        "url_regex": {
          "description": "Single-rule flattening helper for noise_action=add",
          "type": "string"
        },
        "value": {
          "description": "Flat value alias for save action; treated as data when provided",
          "type": "string"
        },
        "verif_session_action": {
          "enum": [
            "capture",
            "compare",
            "list",
            "delete"
          ],
          "type": "string"
        },
        "what": {
          "enum": [
            "store",
            "load",
            "noise_rule",
            "clear",
            "health",
            "tutorial",
            "examples",
            "streaming",
            "test_boundary_start",
            "test_boundary_end",
            "recording_start",
            "recording_stop",
            "playback",
            "log_diff",
            "telemetry",
            "describe_capabilities",
            "diff_sessions",
            "audit_log",
            "restart",
            "save_sequence",
            "get_sequence",
            "list_sequences",
            "delete_sequence",
            "replay_sequence",
            "doctor"
          ],
          "type": "string"
        }
      },
      "required": [
        "what"
      ],
      "type": "object"
    }
  },
  {
    "name": "interact",
    "description": "Browser actions. Requires AI Web Pilot.\n\nSynchronous Mode (Default): Tools now block until the extension returns a result (up to 15s). Set background:true to return immediately with a correlation_id.\n\nSelectors: CSS or semantic (text=Submit, role=button, placeholder=Email, label=Name, aria-label=Close). subtitle param composable with any action. analyze=true captures perf_diff. navigate/refresh auto-include perf_diff.\n\nDraw Mode: draw_mode_start activates annotation overlay — user draws rectangles and types feedback, presses ESC to finish. Use analyze({what:'annotations'}) to retrieve results.\n\nCompatibility: action='screenshot' is a backward-compatible alias for observe({what:'screenshot'}).",
    "inputSchema": {
      "properties": {
        "action": {
          "description": "Deprecated alias for 'what'",
          "enum": [
            "highlight",
            "subtitle",
            "save_state",
            "state_save",
            "load_state",
            "state_load",
            "list_states",
            "state_list",
            "delete_state",
            "state_delete",
            "set_storage",
            "delete_storage",
            "clear_storage",
            "set_cookie",
            "delete_cookie",
            "execute_js",
            "navigate",
            "refresh",
            "back",
            "forward",
            "new_tab",
            "screenshot",
            "click",
            "type",
            "select",
            "check",
            "get_text",
            "get_value",
            "get_attribute",
            "set_attribute",
            "focus",
            "scroll_to",
            "wait_for",
            "key_press",
            "paste",
            "open_composer",
            "submit_active_composer",
            "confirm_top_dialog",
            "dismiss_top_overlay",
            "list_interactive",
            "get_readable",
            "get_markdown",
            "navigate_and_wait_for",
            "fill_form_and_submit",
            "fill_form",
            "run_a11y_and_export_sarif",
            "record_start",
            "record_stop",
            "upload",
            "draw_mode_start"
          ],
          "type": "string"
        },
        "analyze": {
          "description": "Enable perf profiling (captures perf_diff)",
          "type": "boolean"
        },
        "annot_session": {
          "description": "Named session for multi-page annotation review (applies to draw_mode_start). Accumulates annotations across pages under a shared session name.",
          "type": "string"
        },
        "api_endpoint": {
          "description": "API endpoint for direct upload mode",
          "type": "string"
        },
        "audio": {
          "description": "Recording audio: tab, mic, both. Omit for video-only.",
          "enum": [
            "tab",
            "mic",
            "both"
          ],
          "type": "string"
        },
        "background": {
          "description": "Run in background and return a correlation_id immediately.",
          "type": "boolean"
        },
        "checked": {
          "description": "Check/uncheck (default true)",
          "type": "boolean"
        },
        "clear": {
          "description": "Clear before typing",
          "type": "boolean"
        },
        "correlation_id": {
          "description": "Link to error/investigation",
          "type": "string"
        },
        "domain": {
          "description": "Cookie domain (set_cookie/delete_cookie)",
          "type": "string"
        },
        "duration_ms": {
          "description": "Highlight duration ms (default 5000)",
          "type": "number"
        },
        "element_id": {
          "description": "Stable element handle from list_interactive (preferred for deterministic follow-up actions)",
          "type": "string"
        },
        "escalation_timeout_ms": {
          "description": "Upload escalation timeout in ms",
          "type": "number"
        },
        "evidence": {
          "description": "Optional visual evidence capture mode: off (default), on_mutation, always.",
          "enum": [
            "off",
            "on_mutation",
            "always"
          ],
          "type": "string"
        },
        "fields": {
          "description": "Form fields to fill (fill_form, fill_form_and_submit)",
          "items": {
            "properties": {
              "index": {
                "description": "Element index from list_interactive (alternative to selector)",
                "type": "number"
              },
              "selector": {
                "description": "CSS selector for the field",
                "type": "string"
              },
              "value": {
                "description": "Value to type into the field",
                "type": "string"
              }
            },
            "required": [
              "value"
            ],
            "type": "object"
          },
          "type": "array"
        },
        "file_path": {
          "description": "Absolute file path for upload action",
          "type": "string"
        },
        "fps": {
          "description": "Recording FPS (5-60, default 15)",
          "type": "number"
        },
        "frame": {
          "description": "Target iframe: CSS selector, 0-based index, or \"all\"",
          "type": "string"
        },
        "include_content": {
          "description": "Return page content with navigate response (url, title, text_content, vitals)",
          "type": "boolean"
        },
        "include_url": {
          "description": "Restore URL with state",
          "type": "boolean"
        },
        "index": {
          "description": "Element index from list_interactive results (legacy alternative to selector/element_id)",
          "type": "number"
        },
        "key": {
          "description": "Storage key for set_storage/delete_storage",
          "type": "string"
        },
        "name": {
          "description": "Attribute, recording, or cookie name",
          "type": "string"
        },
        "observe_mutations": {
          "description": "Track element-level DOM mutations during action execution",
          "type": "boolean"
        },
        "path": {
          "description": "Cookie path (set_cookie/delete_cookie, default /)",
          "type": "string"
        },
        "reason": {
          "description": "Action reason (shown as toast)",
          "type": "string"
        },
        "save_to": {
          "description": "File path to save output (run_a11y_and_export_sarif)",
          "type": "string"
        },
        "scope_selector": {
          "description": "Optional container selector to constrain DOM actions to a specific region",
          "type": "string"
        },
        "script": {
          "description": "JS code (execute_js)",
          "type": "string"
        },
        "selector": {
          "description": "CSS or semantic selector for target element",
          "type": "string"
        },
        "snapshot_name": {
          "description": "State snapshot name",
          "type": "string"
        },
        "storage_type": {
          "description": "Storage target for state mutation actions",
          "enum": [
            "localStorage",
            "sessionStorage"
          ],
          "type": "string"
        },
        "submit": {
          "description": "Submit form after upload",
          "type": "boolean"
        },
        "submit_index": {
          "description": "Submit button index from list_interactive (fill_form_and_submit)",
          "type": "number"
        },
        "submit_selector": {
          "description": "Submit button selector (fill_form_and_submit)",
          "type": "string"
        },
        "subtitle": {
          "description": "Narration text, composable with any action. Empty clears.",
          "type": "string"
        },
        "sync": {
          "description": "Wait for result (default: true).",
          "type": "boolean"
        },
        "tab_id": {
          "description": "Tab ID (default: active)",
          "type": "number"
        },
        "telemetry_mode": {
          "description": "Telemetry metadata mode for this call: off, auto, full",
          "enum": [
            "off",
            "auto",
            "full"
          ],
          "type": "string"
        },
        "text": {
          "description": "Text for type/subtitle. key_press keys: Enter, Tab, Escape, Backspace, ArrowDown, ArrowUp, Space.",
          "type": "string"
        },
        "timeout_ms": {
          "description": "Timeout ms (default 5000)",
          "type": "number"
        },
        "url": {
          "description": "URL (navigate, new_tab)",
          "type": "string"
        },
        "value": {
          "description": "Value for select/set_attribute",
          "type": "string"
        },
        "visible_only": {
          "description": "Only return visible elements (list_interactive)",
          "type": "boolean"
        },
        "wait": {
          "description": "Alias for sync (default: true).",
          "type": "boolean"
        },
        "wait_for": {
          "description": "CSS selector to wait for after navigation (navigate_and_wait_for)",
          "type": "string"
        },
        "what": {
          "enum": [
            "highlight",
            "subtitle",
            "save_state",
            "state_save",
            "load_state",
            "state_load",
            "list_states",
            "state_list",
            "delete_state",
            "state_delete",
            "set_storage",
            "delete_storage",
            "clear_storage",
            "set_cookie",
            "delete_cookie",
            "execute_js",
            "navigate",
            "refresh",
            "back",
            "forward",
            "new_tab",
            "screenshot",
            "click",
            "type",
            "select",
            "check",
            "get_text",
            "get_value",
            "get_attribute",
            "set_attribute",
            "focus",
            "scroll_to",
            "wait_for",
            "key_press",
            "paste",
            "open_composer",
            "submit_active_composer",
            "confirm_top_dialog",
            "dismiss_top_overlay",
            "list_interactive",
            "get_readable",
            "get_markdown",
            "navigate_and_wait_for",
            "fill_form_and_submit",
            "fill_form",
            "run_a11y_and_export_sarif",
            "record_start",
            "record_stop",
            "upload",
            "draw_mode_start"
          ],
          "type": "string"
        },
        "world": {
          "description": "JS world: auto (default), main (page globals), isolated (bypass CSP).",
          "enum": [
            "auto",
            "main",
            "isolated"
          ],
          "type": "string"
        }
      },
      "required": [
        "what"
      ],
      "type": "object"
    }
  }
]
