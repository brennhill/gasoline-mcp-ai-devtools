[
  {
    "name": "observe",
    "description": "Read captured browser state from extension buffers.\n\nnetwork_bodies captures fetch() only; use network_waterfall for all requests. extension_logs = internal debug logs (use logs for console). error_bundles = pre-assembled debug context per error. Use body_key/body_path to extract JSON subtrees from network_bodies.\n\nPagination: pass after_cursor/before_cursor/since_cursor from response metadata. restart_on_eviction=true if cursor expired.",
    "inputSchema": {
      "properties": {
        "after_cursor": {
          "description": "Backward pagination cursor from response metadata",
          "type": "string"
        },
        "before_cursor": {
          "description": "Forward pagination cursor",
          "type": "string"
        },
        "body_key": {
          "description": "Extract values for a JSON key from response_body (network_bodies)",
          "type": "string"
        },
        "body_path": {
          "description": "Extract JSON value from response_body using path, e.g. data.items[0].id (network_bodies)",
          "type": "string"
        },
        "connection_id": {
          "description": "WebSocket connection ID filter",
          "type": "string"
        },
        "correlation_id": {
          "description": "Async command correlation ID",
          "type": "string"
        },
        "direction": {
          "enum": [
            "incoming",
            "outgoing"
          ],
          "type": "string"
        },
        "include": {
          "description": "Categories to include (timeline)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "last_n": {
          "description": "Return last N items only",
          "type": "number"
        },
        "level": {
          "description": "Exact log level filter (logs)",
          "enum": [
            "debug",
            "log",
            "info",
            "warn",
            "error"
          ],
          "type": "string"
        },
        "limit": {
          "description": "Max entries to return (default 100, max 1000)",
          "type": "number"
        },
        "method": {
          "description": "HTTP method filter",
          "type": "string"
        },
        "min_level": {
          "description": "Min log level (logs)",
          "enum": [
            "debug",
            "log",
            "info",
            "warn",
            "error"
          ],
          "type": "string"
        },
        "restart_on_eviction": {
          "description": "Auto-restart if cursor expired",
          "type": "boolean"
        },
        "since_cursor": {
          "description": "Return all entries newer than cursor (no limit)",
          "type": "string"
        },
        "source": {
          "description": "Exact source filter (logs)",
          "type": "string"
        },
        "status_max": {
          "description": "Max HTTP status code",
          "type": "number"
        },
        "status_min": {
          "description": "Min HTTP status code",
          "type": "number"
        },
        "telemetry_mode": {
          "description": "Telemetry metadata mode for this call: off, auto, full",
          "enum": [
            "off",
            "auto",
            "full"
          ],
          "type": "string"
        },
        "url": {
          "description": "Filter by URL substring",
          "type": "string"
        },
        "what": {
          "enum": [
            "errors",
            "logs",
            "extension_logs",
            "network_waterfall",
            "network_bodies",
            "websocket_events",
            "websocket_status",
            "actions",
            "vitals",
            "page",
            "tabs",
            "pilot",
            "timeline",
            "error_bundles",
            "screenshot",
            "command_result",
            "pending_commands",
            "failed_commands",
            "saved_videos",
            "recordings",
            "recording_actions",
            "log_diff_report"
          ],
          "type": "string"
        },
        "window_seconds": {
          "description": "error_bundles lookback seconds (default 3, max 10)",
          "type": "number"
        }
      },
      "required": [
        "what"
      ],
      "type": "object"
    }
  },
  {
    "name": "analyze",
    "description": "Trigger active analysis. Creates async queries the extension executes.\n\nSynchronous Mode (Default): Tools now block until the extension returns a result (up to 15s). Set background:true to return immediately with a correlation_id.\n\nDraw Mode: Use annotations to get all annotations from the last draw mode session. Use annotation_detail with correlation_id to get full computed styles and DOM detail for a specific annotation.",
    "inputSchema": {
      "properties": {
        "background": {
          "description": "Run in background and return a correlation_id immediately.",
          "type": "boolean"
        },
        "checks": {
          "description": "Checks to run (security_audit)",
          "items": {
            "enum": [
              "credentials",
              "pii",
              "headers",
              "cookies",
              "transport",
              "auth"
            ],
            "type": "string"
          },
          "type": "array"
        },
        "correlation_id": {
          "description": "Correlation ID for fetching annotation detail (applies to annotation_detail)",
          "type": "string"
        },
        "custom_lists": {
          "description": "Custom domain allow/block lists (third_party_audit)",
          "type": "object"
        },
        "domain": {
          "description": "Domain to check (link_health)",
          "type": "string"
        },
        "first_party_origins": {
          "description": "First-party origins (third_party_audit)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "force_refresh": {
          "description": "Bypass cache (accessibility)",
          "type": "boolean"
        },
        "frame": {
          "description": "Target iframe: CSS selector, 0-based index, or \"all\" (dom, accessibility)",
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "number"
            }
          ]
        },
        "ignore_endpoints": {
          "description": "URL substrings to exclude (api_validation)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "include_static": {
          "description": "Include static-only origins (third_party_audit)",
          "type": "boolean"
        },
        "max_workers": {
          "description": "Max concurrent workers (link_health)",
          "type": "number"
        },
        "operation": {
          "description": "API validation operation",
          "enum": [
            "analyze",
            "report",
            "clear"
          ],
          "type": "string"
        },
        "scope": {
          "description": "CSS selector scope (accessibility)",
          "type": "string"
        },
        "selector": {
          "description": "CSS selector (dom, accessibility)",
          "type": "string"
        },
        "session": {
          "description": "Named session for multi-page annotation review (applies to annotations). Accumulates annotations across pages.",
          "type": "string"
        },
        "severity_min": {
          "description": "Min severity (security_audit)",
          "enum": [
            "critical",
            "high",
            "medium",
            "low",
            "info"
          ],
          "type": "string"
        },
        "sync": {
          "description": "Wait for result (default: true).",
          "type": "boolean"
        },
        "tab_id": {
          "description": "Target tab ID (dom, page_summary)",
          "type": "number"
        },
        "tags": {
          "description": "WCAG tags (accessibility)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "telemetry_mode": {
          "description": "Telemetry metadata mode for this call: off, auto, full",
          "enum": [
            "off",
            "auto",
            "full"
          ],
          "type": "string"
        },
        "timeout_ms": {
          "description": "Timeout ms (link_health, page_summary, annotations). For annotations with wait=true: default 300000 (5 min), max 600000 (10 min).",
          "type": "number"
        },
        "wait": {
          "description": "Wait for result (default: true). For annotations: blocks up to 5 min for user to finish drawing.",
          "type": "boolean"
        },
        "what": {
          "enum": [
            "dom",
            "performance",
            "accessibility",
            "error_clusters",
            "history",
            "security_audit",
            "third_party_audit",
            "link_health",
            "link_validation",
            "page_summary",
            "annotations",
            "annotation_detail",
            "api_validation",
            "draw_history",
            "draw_session"
          ],
          "type": "string"
        },
        "world": {
          "description": "Execution world for page_summary script",
          "enum": [
            "auto",
            "main",
            "isolated"
          ],
          "type": "string"
        }
      },
      "required": [
        "what"
      ],
      "type": "object"
    }
  },
  {
    "name": "generate",
    "description": "Generate artifacts from captured data: reproduction (bug script), csp (Content Security Policy), sarif (accessibility report). Test generation: test_from_context, test_heal, test_classify. Annotation formats: visual_test, annotation_report, annotation_issues.",
    "inputSchema": {
      "properties": {
        "assert_network": {
          "description": "Assert network responses (test)",
          "type": "boolean"
        },
        "assert_no_errors": {
          "description": "Assert no console errors (test)",
          "type": "boolean"
        },
        "assert_response_shape": {
          "description": "Assert response shape (test)",
          "type": "boolean"
        },
        "base_url": {
          "description": "Replace origin in URLs",
          "type": "string"
        },
        "error_message": {
          "description": "Error context (reproduction)",
          "type": "string"
        },
        "exclude_origins": {
          "description": "Origins to exclude (csp)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "format": {
          "enum": [
            "reproduction",
            "test",
            "pr_summary",
            "har",
            "csp",
            "sri",
            "sarif",
            "visual_test",
            "annotation_report",
            "annotation_issues",
            "test_from_context",
            "test_heal",
            "test_classify"
          ],
          "type": "string"
        },
        "generate_fixtures": {
          "description": "Generate network fixtures (reproduction)",
          "type": "boolean"
        },
        "include_passes": {
          "description": "Include passing rules (sarif)",
          "type": "boolean"
        },
        "include_report_uri": {
          "description": "Include report-uri (csp)",
          "type": "boolean"
        },
        "include_screenshots": {
          "description": "Add screenshot calls (reproduction)",
          "type": "boolean"
        },
        "last_n": {
          "description": "Use last N actions (reproduction)",
          "type": "number"
        },
        "method": {
          "description": "HTTP method filter (har)",
          "type": "string"
        },
        "mode": {
          "enum": [
            "strict",
            "moderate",
            "report_only"
          ],
          "type": "string"
        },
        "origins": {
          "description": "Filter origins (sri)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "resource_types": {
          "description": "Resource types: script, stylesheet (sri)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "save_to": {
          "description": "File path to save output",
          "type": "string"
        },
        "scope": {
          "description": "CSS selector scope (sarif)",
          "type": "string"
        },
        "session": {
          "description": "Named annotation session (applies to visual_test, annotation_report, annotation_issues)",
          "type": "string"
        },
        "status_max": {
          "description": "Max status code (har)",
          "type": "number"
        },
        "status_min": {
          "description": "Min status code (har)",
          "type": "number"
        },
        "telemetry_mode": {
          "description": "Telemetry metadata mode for this call: off, auto, full",
          "enum": [
            "off",
            "auto",
            "full"
          ],
          "type": "string"
        },
        "test_name": {
          "description": "Test name (test, visual_test)",
          "type": "string"
        },
        "url": {
          "description": "URL filter (har)",
          "type": "string"
        },
        "visual_assertions": {
          "description": "Add visual assertions (reproduction)",
          "type": "boolean"
        }
      },
      "required": [
        "format"
      ],
      "type": "object"
    }
  },
  {
    "name": "configure",
    "description": "Session settings and utilities.\n\nKey actions: health (check server/extension status), clear (reset buffers), noise_rule (suppress recurring console noise), store/load (persist/retrieve session data), streaming (enable push notifications), recording_start/recording_stop (capture browser sessions), playback (replay recordings), log_diff (compare error states).",
    "inputSchema": {
      "properties": {
        "action": {
          "enum": [
            "store",
            "load",
            "noise_rule",
            "clear",
            "health",
            "streaming",
            "test_boundary_start",
            "test_boundary_end",
            "recording_start",
            "recording_stop",
            "playback",
            "log_diff",
            "telemetry"
          ],
          "type": "string"
        },
        "buffer": {
          "enum": [
            "network",
            "websocket",
            "actions",
            "logs",
            "all"
          ],
          "type": "string"
        },
        "category": {
          "enum": [
            "console",
            "network",
            "websocket"
          ],
          "type": "string"
        },
        "compare_a": {
          "description": "First snapshot to compare",
          "type": "string"
        },
        "compare_b": {
          "description": "Second snapshot to compare",
          "type": "string"
        },
        "data": {
          "description": "JSON data to persist",
          "type": "object"
        },
        "events": {
          "description": "Event categories to stream",
          "items": {
            "enum": [
              "errors",
              "network_errors",
              "performance",
              "user_frustration",
              "security",
              "regression",
              "anomaly",
              "ci",
              "all"
            ],
            "type": "string"
          },
          "type": "array"
        },
        "key": {
          "description": "Storage key",
          "type": "string"
        },
        "label": {
          "description": "Test boundary label",
          "type": "string"
        },
        "limit": {
          "description": "Max entries to return (default 100, max 1000)",
          "type": "number"
        },
        "name": {
          "description": "Snapshot name",
          "type": "string"
        },
        "namespace": {
          "description": "Store grouping",
          "type": "string"
        },
        "noise_action": {
          "enum": [
            "add",
            "remove",
            "list",
            "reset",
            "auto_detect"
          ],
          "type": "string"
        },
        "pattern": {
          "description": "Regex pattern",
          "type": "string"
        },
        "reason": {
          "description": "Why this is noise",
          "type": "string"
        },
        "recording_id": {
          "description": "Recording ID (recording_stop, playback)",
          "type": "string"
        },
        "rule_id": {
          "description": "Rule ID to remove",
          "type": "string"
        },
        "rules": {
          "description": "Noise rules to add",
          "items": {
            "type": "object"
          },
          "type": "array"
        },
        "session_action": {
          "enum": [
            "capture",
            "compare",
            "list",
            "delete"
          ],
          "type": "string"
        },
        "session_id": {
          "description": "Filter by session ID",
          "type": "string"
        },
        "severity_min": {
          "enum": [
            "info",
            "warning",
            "error"
          ],
          "type": "string"
        },
        "since": {
          "description": "Entries after ISO 8601 timestamp",
          "type": "string"
        },
        "store_action": {
          "enum": [
            "save",
            "load",
            "list",
            "delete",
            "stats"
          ],
          "type": "string"
        },
        "streaming_action": {
          "enum": [
            "enable",
            "disable",
            "status"
          ],
          "type": "string"
        },
        "tab_id": {
          "description": "Target tab ID",
          "type": "number"
        },
        "telemetry_mode": {
          "description": "Telemetry metadata mode: off, auto, full. configure(action='telemetry') sets global default. Any tools/call may override per request with telemetry_mode.",
          "enum": [
            "off",
            "auto",
            "full"
          ],
          "type": "string"
        },
        "test_id": {
          "description": "Test boundary ID",
          "type": "string"
        },
        "throttle_seconds": {
          "description": "Min seconds between notifications",
          "maximum": 60,
          "minimum": 1,
          "type": "integer"
        },
        "tool_name": {
          "description": "Filter by tool name",
          "type": "string"
        }
      },
      "required": [
        "action"
      ],
      "type": "object"
    }
  },
  {
    "name": "interact",
    "description": "Browser actions. Requires AI Web Pilot.\n\nSynchronous Mode (Default): Tools now block until the extension returns a result (up to 15s). Set background:true to return immediately with a correlation_id.\n\nSelectors: CSS or semantic (text=Submit, role=button, placeholder=Email, label=Name, aria-label=Close). subtitle param composable with any action. analyze=true captures perf_diff. navigate/refresh auto-include perf_diff.\n\nDraw Mode: draw_mode_start activates annotation overlay â€” user draws rectangles and types feedback, presses ESC to finish. Use analyze({what:'annotations'}) to retrieve results.\n\nCompatibility: action='screenshot' is a backward-compatible alias for observe({what:'screenshot'}).",
    "inputSchema": {
      "properties": {
        "action": {
          "enum": [
            "highlight",
            "subtitle",
            "save_state",
            "load_state",
            "list_states",
            "delete_state",
            "execute_js",
            "navigate",
            "refresh",
            "back",
            "forward",
            "new_tab",
            "screenshot",
            "click",
            "type",
            "select",
            "check",
            "get_text",
            "get_value",
            "get_attribute",
            "set_attribute",
            "focus",
            "scroll_to",
            "wait_for",
            "key_press",
            "list_interactive",
            "record_start",
            "record_stop",
            "upload",
            "draw_mode_start"
          ],
          "type": "string"
        },
        "analyze": {
          "description": "Enable perf profiling (captures perf_diff)",
          "type": "boolean"
        },
        "audio": {
          "description": "Recording audio: tab, mic, both. Omit for video-only.",
          "enum": [
            "tab",
            "mic",
            "both"
          ],
          "type": "string"
        },
        "background": {
          "description": "Run in background and return a correlation_id immediately.",
          "type": "boolean"
        },
        "checked": {
          "description": "Check/uncheck (default true)",
          "type": "boolean"
        },
        "clear": {
          "description": "Clear before typing",
          "type": "boolean"
        },
        "correlation_id": {
          "description": "Link to error/investigation",
          "type": "string"
        },
        "duration_ms": {
          "description": "Highlight duration ms (default 5000)",
          "type": "number"
        },
        "fps": {
          "description": "Recording FPS (5-60, default 15)",
          "type": "number"
        },
        "frame": {
          "description": "Target iframe: CSS selector, 0-based index, or \"all\"",
          "oneOf": [
            {
              "type": "string"
            },
            {
              "type": "number"
            }
          ]
        },
        "include_url": {
          "description": "Restore URL with state",
          "type": "boolean"
        },
        "name": {
          "description": "Attribute or recording name",
          "type": "string"
        },
        "reason": {
          "description": "Action reason (shown as toast)",
          "type": "string"
        },
        "script": {
          "description": "JS code (execute_js)",
          "type": "string"
        },
        "selector": {
          "description": "CSS or semantic selector for target element",
          "type": "string"
        },
        "session": {
          "description": "Named session for multi-page annotation review (applies to draw_mode_start). Accumulates annotations across pages under a shared session name.",
          "type": "string"
        },
        "snapshot_name": {
          "description": "State snapshot name",
          "type": "string"
        },
        "subtitle": {
          "description": "Narration text, composable with any action. Empty clears.",
          "type": "string"
        },
        "sync": {
          "description": "Wait for result (default: true).",
          "type": "boolean"
        },
        "tab_id": {
          "description": "Tab ID (default: active)",
          "type": "number"
        },
        "telemetry_mode": {
          "description": "Telemetry metadata mode for this call: off, auto, full",
          "enum": [
            "off",
            "auto",
            "full"
          ],
          "type": "string"
        },
        "text": {
          "description": "Text for type/subtitle. key_press keys: Enter, Tab, Escape, Backspace, ArrowDown, ArrowUp, Space.",
          "type": "string"
        },
        "timeout_ms": {
          "description": "Timeout ms (default 5000)",
          "type": "number"
        },
        "url": {
          "description": "URL (navigate, new_tab)",
          "type": "string"
        },
        "value": {
          "description": "Value for select/set_attribute",
          "type": "string"
        },
        "wait": {
          "description": "Alias for sync (default: true).",
          "type": "boolean"
        },
        "world": {
          "description": "JS world: auto (default), main (page globals), isolated (bypass CSP).",
          "enum": [
            "auto",
            "main",
            "isolated"
          ],
          "type": "string"
        }
      },
      "required": [
        "action"
      ],
      "type": "object"
    }
  }
]
