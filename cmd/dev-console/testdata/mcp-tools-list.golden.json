[
  {
    "name": "observe",
    "description": "Read current browser state. Call observe() first before interact() or generate().\n\nModes: errors, logs, extension_logs, network_waterfall, network_bodies, websocket_events, websocket_status, actions, vitals, page, tabs, pilot, performance, accessibility, timeline, error_clusters, error_bundles, history, security_audit, third_party_audit, security_diff, command_result, pending_commands, failed_commands.\n\nFilters: limit, url, method, status_min/max, connection_id, direction, last_n, format, severity, min_level.\n\nPagination: Pass after_cursor/before_cursor/since_cursor from metadata. Use restart_on_eviction=true if cursor expires.\n\nResponses: JSON format.\n\nNote: network_bodies only captures fetch(). Use network_waterfall for all network requests.\nNote: extension_logs are internal Gasoline extension debug logs for troubleshooting the extension itself â€” NOT browser console output. Use 'logs' for browser console output.\nNote: error_bundles returns pre-assembled debugging context per error (error + recent network + actions + logs in one call). Use window_seconds param to control context window (default 3s).",
    "inputSchema": {
      "properties": {
        "action": {
          "description": "Snapshot action: snapshot, compare, list (applies to security_diff)",
          "enum": [
            "snapshot",
            "compare",
            "list"
          ],
          "type": "string"
        },
        "after_cursor": {
          "description": "Return entries older than this cursor (backward pagination). Cursor format: 'timestamp:sequence' from previous response.",
          "type": "string"
        },
        "before_cursor": {
          "description": "Return entries newer than this cursor (forward pagination).",
          "type": "string"
        },
        "checks": {
          "description": "Which checks to run (applies to security_audit)",
          "items": {
            "enum": [
              "credentials",
              "pii",
              "headers",
              "cookies",
              "transport",
              "auth"
            ],
            "type": "string"
          },
          "type": "array"
        },
        "compare_from": {
          "description": "Baseline snapshot (applies to security_diff)",
          "type": "string"
        },
        "compare_to": {
          "description": "Target snapshot (applies to security_diff)",
          "type": "string"
        },
        "connection_id": {
          "description": "Filter by WebSocket connection ID",
          "type": "string"
        },
        "correlation_id": {
          "description": "Correlation ID for async command tracking (applies to command_result)",
          "type": "string"
        },
        "custom_lists": {
          "description": "Custom allowed/blocked/internal domain lists (applies to third_party_audit)",
          "type": "object"
        },
        "direction": {
          "description": "Filter by direction",
          "enum": [
            "incoming",
            "outgoing"
          ],
          "type": "string"
        },
        "first_party_origins": {
          "description": "Origins to consider first-party (applies to third_party_audit)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "force_refresh": {
          "description": "Bypass cache (applies to accessibility)",
          "type": "boolean"
        },
        "include": {
          "description": "Categories to include (applies to timeline)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "include_static": {
          "description": "Include static-only origins (applies to third_party_audit)",
          "type": "boolean"
        },
        "last_n": {
          "description": "Return only the last N items",
          "type": "number"
        },
        "limit": {
          "description": "Maximum entries to return (applies to logs, network_waterfall, network_bodies, websocket_events, actions, audit_log)",
          "type": "number"
        },
        "method": {
          "description": "Filter by HTTP method (applies to network_bodies)",
          "type": "string"
        },
        "min_level": {
          "description": "Minimum log level to return (applies to logs). Levels: debug < log < info < warn < error",
          "enum": [
            "debug",
            "log",
            "info",
            "warn",
            "error"
          ],
          "type": "string"
        },
        "name": {
          "description": "Snapshot name (applies to security_diff)",
          "type": "string"
        },
        "restart_on_eviction": {
          "description": "If cursor expired (buffer overflow), automatically restart from oldest available entry.",
          "type": "boolean"
        },
        "scope": {
          "description": "CSS selector to scope audit (applies to accessibility)",
          "type": "string"
        },
        "severity_min": {
          "description": "Minimum severity to report (applies to security_audit)",
          "enum": [
            "critical",
            "high",
            "medium",
            "low",
            "info"
          ],
          "type": "string"
        },
        "since_cursor": {
          "description": "Return ALL entries newer than this cursor (inclusive, no limit).",
          "type": "string"
        },
        "status_max": {
          "description": "Maximum status code (applies to network_bodies)",
          "type": "number"
        },
        "status_min": {
          "description": "Minimum status code (applies to network_bodies)",
          "type": "number"
        },
        "tags": {
          "description": "WCAG tags to test (applies to accessibility)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "url": {
          "description": "Filter by URL substring",
          "type": "string"
        },
        "what": {
          "description": "What to observe or analyze",
          "enum": [
            "errors",
            "logs",
            "extension_logs",
            "network_waterfall",
            "network_bodies",
            "websocket_events",
            "websocket_status",
            "actions",
            "vitals",
            "page",
            "tabs",
            "pilot",
            "performance",
            "accessibility",
            "timeline",
            "error_clusters",
            "error_bundles",
            "history",
            "security_audit",
            "third_party_audit",
            "security_diff",
            "command_result",
            "pending_commands",
            "failed_commands"
          ],
          "type": "string"
        },
        "window_seconds": {
          "description": "Context window in seconds for error_bundles (default 3, max 10). How far back to look for related network/actions/logs.",
          "type": "number"
        }
      },
      "required": [
        "what"
      ],
      "type": "object"
    }
  },
  {
    "name": "generate",
    "description": "CREATE ARTIFACTS. Generates production-ready outputs from captured data: test (Playwright tests), reproduction (bug scripts), pr_summary, csp, sarif, har, sri.",
    "inputSchema": {
      "properties": {
        "assert_network": {
          "description": "Include network response assertions (applies to test)",
          "type": "boolean"
        },
        "assert_no_errors": {
          "description": "Assert no console errors occurred (applies to test)",
          "type": "boolean"
        },
        "assert_response_shape": {
          "description": "Assert response body shape matches (applies to test)",
          "type": "boolean"
        },
        "base_url": {
          "description": "Replace origin in URLs (applies to reproduction, test)",
          "type": "string"
        },
        "error_message": {
          "description": "Error message for context (applies to reproduction)",
          "type": "string"
        },
        "exclude_origins": {
          "description": "Origins to exclude from CSP (applies to csp)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "format": {
          "description": "What to generate",
          "enum": [
            "reproduction",
            "test",
            "pr_summary",
            "sarif",
            "har",
            "csp",
            "sri"
          ],
          "type": "string"
        },
        "generate_fixtures": {
          "description": "Generate fixtures from captured network data (applies to reproduction)",
          "type": "boolean"
        },
        "include_passes": {
          "description": "Include passing rules (applies to sarif)",
          "type": "boolean"
        },
        "include_report_uri": {
          "description": "Include report-uri directive (applies to csp)",
          "type": "boolean"
        },
        "include_screenshots": {
          "description": "Insert page.screenshot() calls (applies to reproduction)",
          "type": "boolean"
        },
        "last_n": {
          "description": "Use only the last N actions (applies to reproduction)",
          "type": "number"
        },
        "method": {
          "description": "Filter by HTTP method (applies to har)",
          "type": "string"
        },
        "mode": {
          "description": "CSP strictness mode (applies to csp)",
          "enum": [
            "strict",
            "moderate",
            "report_only"
          ],
          "type": "string"
        },
        "origins": {
          "description": "Filter by specific origins (applies to sri)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "resource_types": {
          "description": "Filter by resource type: 'script', 'stylesheet' (applies to sri)",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "save_to": {
          "description": "File path to save output (applies to sarif, har)",
          "type": "string"
        },
        "scope": {
          "description": "CSS selector to scope (applies to sarif)",
          "type": "string"
        },
        "status_max": {
          "description": "Maximum status code (applies to har)",
          "type": "number"
        },
        "status_min": {
          "description": "Minimum status code (applies to har)",
          "type": "number"
        },
        "test_name": {
          "description": "Name for the generated test (applies to test)",
          "type": "string"
        },
        "url": {
          "description": "Filter by URL substring (applies to har)",
          "type": "string"
        },
        "visual_assertions": {
          "description": "Add toHaveScreenshot() assertions (applies to reproduction)",
          "type": "boolean"
        }
      },
      "required": [
        "format"
      ],
      "type": "object"
    }
  },
  {
    "name": "configure",
    "description": "CUSTOMIZE THE SESSION. Actions: noise_rule, store, load, diff_sessions, validate_api, audit_log, streaming, query_dom, clear, health, test_boundary_start, test_boundary_end.",
    "inputSchema": {
      "properties": {
        "action": {
          "description": "Configuration action to perform",
          "enum": [
            "store",
            "load",
            "noise_rule",
            "clear",
            "query_dom",
            "diff_sessions",
            "validate_api",
            "audit_log",
            "health",
            "streaming",
            "test_boundary_start",
            "test_boundary_end"
          ],
          "type": "string"
        },
        "buffer": {
          "description": "Which buffer to clear",
          "enum": [
            "network",
            "websocket",
            "actions",
            "logs",
            "all"
          ],
          "type": "string"
        },
        "category": {
          "description": "Buffer category",
          "enum": [
            "console",
            "network",
            "websocket"
          ],
          "type": "string"
        },
        "compare_a": {
          "description": "First snapshot for comparison",
          "type": "string"
        },
        "compare_b": {
          "description": "Second snapshot for comparison",
          "type": "string"
        },
        "data": {
          "description": "JSON data to persist",
          "type": "object"
        },
        "events": {
          "description": "Event categories to stream",
          "items": {
            "enum": [
              "errors",
              "network_errors",
              "performance",
              "user_frustration",
              "security",
              "regression",
              "anomaly",
              "ci",
              "all"
            ],
            "type": "string"
          },
          "type": "array"
        },
        "ignore_endpoints": {
          "description": "URL substrings to exclude",
          "items": {
            "type": "string"
          },
          "type": "array"
        },
        "key": {
          "description": "Storage key",
          "type": "string"
        },
        "label": {
          "description": "Human-readable label for test boundary",
          "type": "string"
        },
        "limit": {
          "description": "Maximum entries to return (applies to audit_log)",
          "type": "number"
        },
        "name": {
          "description": "Snapshot name",
          "type": "string"
        },
        "namespace": {
          "description": "Logical grouping for store",
          "type": "string"
        },
        "noise_action": {
          "description": "Noise sub-action: add, remove, list, reset, auto_detect",
          "enum": [
            "add",
            "remove",
            "list",
            "reset",
            "auto_detect"
          ],
          "type": "string"
        },
        "operation": {
          "description": "API validation operation: analyze, report, clear",
          "enum": [
            "analyze",
            "report",
            "clear"
          ],
          "type": "string"
        },
        "pattern": {
          "description": "Regex pattern to match",
          "type": "string"
        },
        "reason": {
          "description": "Why this is noise",
          "type": "string"
        },
        "rule_id": {
          "description": "ID of rule to remove",
          "type": "string"
        },
        "rules": {
          "description": "Noise rules to add",
          "items": {
            "type": "object"
          },
          "type": "array"
        },
        "selector": {
          "description": "CSS selector to query (applies to query_dom)",
          "type": "string"
        },
        "session_action": {
          "description": "Session sub-action: capture, compare, list, delete",
          "enum": [
            "capture",
            "compare",
            "list",
            "delete"
          ],
          "type": "string"
        },
        "session_id": {
          "description": "Filter by MCP session ID (applies to audit_log)",
          "type": "string"
        },
        "severity_min": {
          "description": "Minimum severity to stream",
          "enum": [
            "info",
            "warning",
            "error"
          ],
          "type": "string"
        },
        "since": {
          "description": "Only entries after this ISO 8601 timestamp (applies to audit_log)",
          "type": "string"
        },
        "store_action": {
          "description": "Store sub-action: save, load, list, delete, stats",
          "enum": [
            "save",
            "load",
            "list",
            "delete",
            "stats"
          ],
          "type": "string"
        },
        "streaming_action": {
          "description": "Streaming sub-action: enable, disable, status",
          "enum": [
            "enable",
            "disable",
            "status"
          ],
          "type": "string"
        },
        "tab_id": {
          "description": "Target tab ID",
          "type": "number"
        },
        "test_id": {
          "description": "Test ID for boundary marker",
          "type": "string"
        },
        "throttle_seconds": {
          "description": "Minimum seconds between notifications",
          "maximum": 60,
          "minimum": 1,
          "type": "integer"
        },
        "tool_name": {
          "description": "Filter by tool name (applies to audit_log)",
          "type": "string"
        },
        "url": {
          "description": "Filter by URL substring",
          "type": "string"
        }
      },
      "required": [
        "action"
      ],
      "type": "object"
    }
  },
  {
    "name": "interact",
    "description": "PERFORM BROWSER ACTIONS. Actions: navigate, execute_js, refresh, back, forward, new_tab, highlight, subtitle, save_state, load_state, list_states, delete_state. DOM primitives: click, type, select, check, get_text, get_value, get_attribute, set_attribute, focus, scroll_to, wait_for, key_press, list_interactive. Subtitle: persistent narration text at bottom of viewport (like closed captions). Use action='subtitle' with text param, or add 'subtitle' param to any other action for composable narration. Performance: set analyze=true on DOM actions to get perf_diff with timing breakdown and resource changes in the async result. Requires AI Web Pilot enabled.",
    "inputSchema": {
      "properties": {
        "action": {
          "description": "Browser interaction to perform",
          "enum": [
            "highlight",
            "subtitle",
            "save_state",
            "load_state",
            "list_states",
            "delete_state",
            "execute_js",
            "navigate",
            "refresh",
            "back",
            "forward",
            "new_tab",
            "click",
            "type",
            "select",
            "check",
            "get_text",
            "get_value",
            "get_attribute",
            "set_attribute",
            "focus",
            "scroll_to",
            "wait_for",
            "key_press",
            "list_interactive"
          ],
          "type": "string"
        },
        "analyze": {
          "description": "Enable performance profiling for this action. When true, captures timing breakdown and perf_diff (before/after metrics) in the async result.",
          "type": "boolean"
        },
        "checked": {
          "description": "Whether to check or uncheck (applies to check, default: true)",
          "type": "boolean"
        },
        "clear": {
          "description": "Clear existing value before typing (applies to type)",
          "type": "boolean"
        },
        "correlation_id": {
          "description": "Optional ID to link this action to a specific error or investigation.",
          "type": "string"
        },
        "duration_ms": {
          "description": "Highlight duration in ms, default 5000",
          "type": "number"
        },
        "include_url": {
          "description": "Include URL when restoring state",
          "type": "boolean"
        },
        "name": {
          "description": "Attribute name (applies to get_attribute, set_attribute)",
          "type": "string"
        },
        "reason": {
          "description": "Why this action is being performed (shown in visual toast). Example: 'Opening compose to send test email'.",
          "type": "string"
        },
        "script": {
          "description": "JavaScript code to execute (applies to execute_js)",
          "type": "string"
        },
        "selector": {
          "description": "CSS selector or semantic selector for element (applies to highlight, click, type, select, check, get_text, get_value, get_attribute, set_attribute, focus, scroll_to, wait_for, key_press). Semantic: text=Submit, role=button, placeholder=Email, label=Name, aria-label=Close.",
          "type": "string"
        },
        "snapshot_name": {
          "description": "State snapshot name",
          "type": "string"
        },
        "subtitle": {
          "description": "Optional narration text displayed at bottom of viewport. Can be added to ANY action for composable narration in a single tool call. Empty string clears.",
          "type": "string"
        },
        "tab_id": {
          "description": "Target tab ID. Omit for active tab.",
          "type": "number"
        },
        "text": {
          "description": "Text to type into the element (applies to type). Key name for key_press: Enter, Tab, Escape, Backspace, ArrowDown, ArrowUp, Space. Subtitle text (applies to subtitle action, required). Empty string clears.",
          "type": "string"
        },
        "timeout_ms": {
          "description": "Execution timeout in ms, default 5000 (applies to execute_js, wait_for)",
          "type": "number"
        },
        "url": {
          "description": "URL to navigate to (required for navigate, new_tab)",
          "type": "string"
        },
        "value": {
          "description": "Value to set (applies to select, set_attribute)",
          "type": "string"
        },
        "world": {
          "description": "Execution world: 'auto' (default, tries main then isolated on CSP error), 'main' (access page JS globals), or 'isolated' (bypasses page CSP, DOM access only). Use 'isolated' for sites with Trusted Types CSP like Gmail.",
          "enum": [
            "auto",
            "main",
            "isolated"
          ],
          "type": "string"
        }
      },
      "required": [
        "action"
      ],
      "type": "object"
    }
  }
]
